<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exerc√≠cios Interativos - IA Fundamentos</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tensorflow/4.10.0/tf.min.js"></script>
    <style>
        :root {
            --primary: #667eea;
            --secondary: #764ba2;
            --success: #4ade80;
            --warning: #fbbf24;
            --error: #ef4444;
            --bg: #f8fafc;
            --surface: #ffffff;
            --text: #1f2937;
            --text-secondary: #6b7280;
            --border: #e5e7eb;
        }

        [data-theme="dark"] {
            --bg: #0f172a;
            --surface: #1e293b;
            --text: #f1f5f9;
            --text-secondary: #94a3b8;
            --border: #334155;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            min-height: 100vh;
            color: var(--text);
            transition: all 0.3s ease;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 1rem;
            padding: 2rem;
            text-align: center;
            margin-bottom: 2rem;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        }

        .exercise-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .exercise-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 1rem;
            padding: 2rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            border: 1px solid var(--border);
        }

        .exercise-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.15);
        }

        .exercise-title {
            color: var(--primary);
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .btn {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 0.5rem;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }

        .btn-secondary {
            background: linear-gradient(135deg, var(--text-secondary), var(--text));
        }

        .interactive-area {
            background: var(--bg);
            border-radius: 0.5rem;
            padding: 1.5rem;
            margin: 1rem 0;
            border: 2px solid var(--border);
        }

        .neural-network-viz {
            width: 100%;
            height: 300px;
            position: relative;
            overflow: hidden;
        }

        .neuron {
            position: absolute;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .neuron.active {
            background: var(--success);
            transform: scale(1.2);
        }

        .connection {
            position: absolute;
            height: 2px;
            background: var(--text-secondary);
            transform-origin: left center;
            transition: all 0.3s ease;
        }

        .connection.active {
            background: var(--success);
            height: 3px;
        }

        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            margin: 1rem 0;
            align-items: center;
        }

        .slider-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .slider {
            width: 150px;
            height: 5px;
            border-radius: 5px;
            background: var(--border);
            outline: none;
            -webkit-appearance: none;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--primary);
            cursor: pointer;
        }

        .quiz-container {
            background: var(--surface);
            border-radius: 0.5rem;
            padding: 1.5rem;
            margin: 1rem 0;
        }

        .quiz-question {
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--text);
        }

        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .quiz-option {
            background: var(--bg);
            border: 2px solid var(--border);
            border-radius: 0.5rem;
            padding: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .quiz-option:hover {
            border-color: var(--primary);
            background: rgba(102, 126, 234, 0.1);
        }

        .quiz-option.selected {
            border-color: var(--primary);
            background: var(--primary);
            color: white;
        }

        .quiz-option.correct {
            border-color: var(--success);
            background: var(--success);
            color: white;
        }

        .quiz-option.incorrect {
            border-color: var(--error);
            background: var(--error);
            color: white;
        }

        .feedback {
            background: var(--bg);
            border-radius: 0.5rem;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid var(--primary);
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: var(--border);
            border-radius: 4px;
            overflow: hidden;
            margin: 1rem 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            transition: width 0.3s ease;
        }

        .data-point {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            position: absolute;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .data-point.class-0 {
            background: var(--primary);
        }

        .data-point.class-1 {
            background: var(--error);
        }

        .data-point:hover {
            transform: scale(1.5);
        }

        .classification-area {
            width: 100%;
            height: 300px;
            position: relative;
            background: var(--bg);
            border-radius: 0.5rem;
            border: 2px solid var(--border);
            overflow: hidden;
        }

        .decision-boundary {
            position: absolute;
            width: 100%;
            height: 2px;
            background: var(--text);
            transform-origin: left center;
        }

        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }
            
            .exercise-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
            
            .exercise-card {
                padding: 1.5rem;
            }
            
            .controls {
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üß† Exerc√≠cios Interativos - Fundamentos de IA</h1>
            <p>Explore conceitos de IA atrav√©s de simula√ß√µes pr√°ticas e experimentos visuais</p>
        </div>

        <div class="exercise-grid">
            <!-- Exerc√≠cio 1: Simulador de Neur√¥nio -->
            <div class="exercise-card">
                <h2 class="exercise-title">1. Simulador de Neur√¥nio Artificial</h2>
                <p>Experimente como um neur√¥nio processa entradas e gera sa√≠das usando diferentes fun√ß√µes de ativa√ß√£o.</p>
                
                <div class="interactive-area">
                    <div class="controls">
                        <div class="slider-group">
                            <label>Entrada 1: <span id="input1-value">0.5</span></label>
                            <input type="range" class="slider" id="input1" min="-2" max="2" step="0.1" value="0.5">
                        </div>
                        <div class="slider-group">
                            <label>Entrada 2: <span id="input2-value">0.3</span></label>
                            <input type="range" class="slider" id="input2" min="-2" max="2" step="0.1" value="0.3">
                        </div>
                        <div class="slider-group">
                            <label>Peso 1: <span id="weight1-value">0.7</span></label>
                            <input type="range" class="slider" id="weight1" min="-2" max="2" step="0.1" value="0.7">
                        </div>
                        <div class="slider-group">
                            <label>Peso 2: <span id="weight2-value">0.4</span></label>
                            <input type="range" class="slider" id="weight2" min="-2" max="2" step="0.1" value="0.4">
                        </div>
                        <div class="slider-group">
                            <label>Bias: <span id="bias-value">0.1</span></label>
                            <input type="range" class="slider" id="bias" min="-2" max="2" step="0.1" value="0.1">
                        </div>
                    </div>
                    
                    <div class="controls">
                        <select id="activation-function" class="btn">
                            <option value="relu">ReLU</option>
                            <option value="sigmoid">Sigmoid</option>
                            <option value="tanh">Tanh</option>
                            <option value="linear">Linear</option>
                        </select>
                        <button class="btn" onclick="calculateNeuron()">Calcular Sa√≠da</button>
                    </div>
                    
                    <div id="neuron-result" class="feedback">
                        <strong>Resultado:</strong> Soma ponderada = 0.00, Sa√≠da = 0.00
                    </div>
                </div>
            </div>

            <!-- Exerc√≠cio 2: Rede Neural Visual -->
            <div class="exercise-card">
                <h2 class="exercise-title">2. Visualiza√ß√£o de Rede Neural</h2>
                <p>Veja como os dados fluem atrav√©s de uma rede neural simples.</p>
                
                <div class="interactive-area">
                    <div class="neural-network-viz" id="network-viz">
                        <!-- Neur√¥nios ser√£o criados dinamicamente -->
                    </div>
                    
                    <div class="controls">
                        <button class="btn" onclick="propagateForward()">Propaga√ß√£o Direta</button>
                        <button class="btn btn-secondary" onclick="resetNetwork()">Resetar</button>
                        <button class="btn" onclick="randomizeWeights()">Pesos Aleat√≥rios</button>
                    </div>
                    
                    <div id="network-status" class="feedback">
                        Clique em "Propaga√ß√£o Direta" para ver os dados fluindo pela rede.
                    </div>
                </div>
            </div>

            <!-- Exerc√≠cio 3: Classifica√ß√£o Interativa -->
            <div class="exercise-card">
                <h2 class="exercise-title">3. Classificador de Dados</h2>
                <p>Adicione pontos de dados e veja como diferentes algoritmos os classificam.</p>
                
                <div class="interactive-area">
                    <div class="classification-area" id="classification-area" onclick="addDataPoint(event)">
                        <div class="decision-boundary" id="decision-boundary"></div>
                    </div>
                    
                    <div class="controls">
                        <button class="btn" onclick="setDataClass(0)">Classe A (Azul)</button>
                        <button class="btn" onclick="setDataClass(1)">Classe B (Vermelho)</button>
                        <select id="classifier-type" class="btn">
                            <option value="linear">Linear</option>
                            <option value="knn">K-NN</option>
                            <option value="svm">SVM</option>
                        </select>
                        <button class="btn" onclick="trainClassifier()">Treinar</button>
                        <button class="btn btn-secondary" onclick="clearData()">Limpar</button>
                    </div>
                    
                    <div id="classification-result" class="feedback">
                        Clique na √°rea para adicionar pontos de dados. Escolha a classe e depois treine o classificador.
                    </div>
                </div>
            </div>

            <!-- Exerc√≠cio 4: Quiz Interativo sobre Tipos de ML -->
            <div class="exercise-card">
                <h2 class="exercise-title">4. Quiz: Tipos de Machine Learning</h2>
                <p>Teste seu conhecimento sobre diferentes tipos de aprendizado de m√°quina.</p>
                
                <div class="quiz-container">
                    <div class="quiz-question" id="quiz-question">
                        Carregando pergunta...
                    </div>
                    <div class="quiz-options" id="quiz-options">
                        <!-- Op√ß√µes ser√£o carregadas dinamicamente -->
                    </div>
                    <div class="controls">
                        <button class="btn" onclick="submitQuizAnswer()">Responder</button>
                        <button class="btn btn-secondary" onclick="nextQuestion()">Pr√≥xima</button>
                    </div>
                    <div id="quiz-feedback" class="feedback" style="display: none;">
                        <!-- Feedback aparecer√° aqui -->
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="quiz-progress" style="width: 0%"></div>
                    </div>
                </div>
            </div>

            <!-- Exerc√≠cio 5: Explorador de Fun√ß√µes de Ativa√ß√£o -->
            <div class="exercise-card">
                <h2 class="exercise-title">5. Explorador de Fun√ß√µes de Ativa√ß√£o</h2>
                <p>Compare diferentes fun√ß√µes de ativa√ß√£o e suas caracter√≠sticas.</p>
                
                <div class="interactive-area">
                    <canvas id="activation-chart" width="400" height="300"></canvas>
                    
                    <div class="controls">
                        <label>
                            <input type="checkbox" id="show-relu" checked> ReLU
                        </label>
                        <label>
                            <input type="checkbox" id="show-sigmoid" checked> Sigmoid
                        </label>
                        <label>
                            <input type="checkbox" id="show-tanh" checked> Tanh
                        </label>
                        <label>
                            <input type="checkbox" id="show-leaky" checked> Leaky ReLU
                        </label>
                        <button class="btn" onclick="updateActivationChart()">Atualizar</button>
                    </div>
                    
                    <div id="activation-info" class="feedback">
                        Selecione as fun√ß√µes para comparar suas formas e caracter√≠sticas.
                    </div>
                </div>
            </div>

            <!-- Exerc√≠cio 6: Simulador de Bias em IA -->
            <div class="exercise-card">
                <h2 class="exercise-title">6. Simulador de Bias em IA</h2>
                <p>Explore como o bias nos dados pode afetar os resultados de um modelo de IA.</p>
                
                <div class="interactive-area">
                    <div class="controls">
                        <div class="slider-group">
                            <label>Grupo A (%): <span id="group-a-percent">50</span>%</label>
                            <input type="range" class="slider" id="group-a-slider" min="10" max="90" value="50">
                        </div>
                        <div class="slider-group">
                            <label>Taxa de Sucesso A: <span id="success-a-percent">80</span>%</label>
                            <input type="range" class="slider" id="success-a-slider" min="0" max="100" value="80">
                        </div>
                        <div class="slider-group">
                            <label>Taxa de Sucesso B: <span id="success-b-percent">60</span>%</label>
                            <input type="range" class="slider" id="success-b-slider" min="0" max="100" value="60">
                        </div>
                    </div>
                    
                    <button class="btn" onclick="simulateBias()">Simular Modelo</button>
                    <button class="btn btn-secondary" onclick="generateBalancedDataset()">Dataset Balanceado</button>
                    
                    <div id="bias-results" class="feedback">
                        Configure os par√¢metros e simule para ver o impacto do bias.
                    </div>
                    
                    <canvas id="bias-chart" width="400" height="200"></canvas>
                </div>
            </div>
        </div>

        <div class="exercise-card">
            <h2 class="exercise-title">üèÜ Conclus√£o dos Exerc√≠cios</h2>
            <p>Parab√©ns! Voc√™ explorou conceitos fundamentais de IA atrav√©s de exerc√≠cios pr√°ticos.</p>
            <div class="controls">
                <button class="btn" onclick="generateCertificate()">Gerar Certificado</button>
                <button class="btn btn-secondary" onclick="shareProgress()">Compartilhar Progresso</button>
                <a href="index.html" class="btn">Voltar ao Curso</a>
            </div>
        </div>
    </div>

    <script>
        // Estado global dos exerc√≠cios
        let currentDataClass = 0;
        let dataPoints = [];
        let currentQuestionIndex = 0;
        let quizScore = 0;
        let selectedOption = null;

        // Banco de perguntas do quiz
        const quizQuestions = [
            {
                question: "Qual tipo de ML √© usado para agrupar clientes sem r√≥tulos pr√©vios?",
                options: ["Supervisionado", "N√£o-supervisionado", "Por refor√ßo", "Semi-supervisionado"],
                correct: 1,
                explanation: "Aprendizado n√£o-supervisionado encontra padr√µes em dados sem r√≥tulos."
            },
            {
                question: "O que caracteriza o aprendizado por refor√ßo?",
                options: ["Dados rotulados", "Clustering", "Recompensas e puni√ß√µes", "Classifica√ß√£o"],
                correct: 2,
                explanation: "Aprendizado por refor√ßo usa feedback atrav√©s de recompensas."
            },
            {
                question: "Qual algoritmo √© melhor para classifica√ß√£o de texto?",
                options: ["K-means", "Naive Bayes", "K-NN", "PCA"],
                correct: 1,
                explanation: "Naive Bayes √© eficiente para classifica√ß√£o de texto."
            },
            {
                question: "O que √© overfitting?",
                options: ["Modelo muito simples", "Modelo memoriza dados de treino", "Falta de dados", "Erro de programa√ß√£o"],
                correct: 1,
                explanation: "Overfitting ocorre quando o modelo memoriza em vez de generalizar."
            },
            {
                question: "Qual m√©trica avalia classificadores bin√°rios?",
                options: ["R¬≤", "Precis√£o", "RMSE", "MAE"],
                correct: 1,
                explanation: "Precis√£o √© uma m√©trica fundamental para classifica√ß√£o."
            }
        ];

        // Inicializa√ß√£o
        document.addEventListener('DOMContentLoaded', function() {
            initializeNeuronSimulator();
            createNeuralNetwork();
            loadQuizQuestion();
            updateActivationChart();
            
            // Setup sliders
            setupSliders();
        });

        function setupSliders() {
            const sliders = ['input1', 'input2', 'weight1', 'weight2', 'bias', 'group-a-slider', 'success-a-slider', 'success-b-slider'];
            
            sliders.forEach(id => {
                const slider = document.getElementById(id);
                if (slider) {
                    slider.addEventListener('input', function() {
                        const valueSpan = document.getElementById(id.replace('-slider', '') + '-value') || 
                                         document.getElementById(id + '-value');
                        if (valueSpan) {
                            valueSpan.textContent = this.value;
                        }
                    });
                }
            });
        }

        // Exerc√≠cio 1: Simulador de Neur√¥nio
        function initializeNeuronSimulator() {
            calculateNeuron();
        }

        function calculateNeuron() {
            const input1 = parseFloat(document.getElementById('input1').value);
            const input2 = parseFloat(document.getElementById('input2').value);
            const weight1 = parseFloat(document.getElementById('weight1').value);
            const weight2 = parseFloat(document.getElementById('weight2').value);
            const bias = parseFloat(document.getElementById('bias').value);
            const activationFunc = document.getElementById('activation-function').value;

            const weightedSum = (input1 * weight1) + (input2 * weight2) + bias;
            let output;

            switch(activationFunc) {
                case 'relu':
                    output = Math.max(0, weightedSum);
                    break;
                case 'sigmoid':
                    output = 1 / (1 + Math.exp(-weightedSum));
                    break;
                case 'tanh':
                    output = Math.tanh(weightedSum);
                    break;
                case 'linear':
                    output = weightedSum;
                    break;
                default:
                    output = weightedSum;
            }

            document.getElementById('neuron-result').innerHTML = 
                `<strong>Resultado:</strong> Soma ponderada = ${weightedSum.toFixed(3)}, Sa√≠da = ${output.toFixed(3)}`;
        }

        // Exerc√≠cio 2: Rede Neural Visual
        function createNeuralNetwork() {
            const container = document.getElementById('network-viz');
            container.innerHTML = '';

            const layers = [3, 4, 2]; // 3 inputs, 4 hidden, 2 outputs
            const neuronPositions = [];

            layers.forEach((count, layerIndex) => {
                const layerPositions = [];
                for (let i = 0; i < count; i++) {
                    const x = (layerIndex + 1) * (container.offsetWidth / (layers.length + 1));
                    const y = (i + 1) * (container.offsetHeight / (count + 1));
                    
                    const neuron = document.createElement('div');
                    neuron.className = 'neuron';
                    neuron.style.left = (x - 15) + 'px';
                    neuron.style.top = (y - 15) + 'px';
                    neuron.textContent = layerIndex === 0 ? 'I' : layerIndex === layers.length - 1 ? 'O' : 'H';
                    neuron.dataset.layer = layerIndex;
                    neuron.dataset.neuron = i;
                    
                    container.appendChild(neuron);
                    layerPositions.push({x, y, element: neuron});
                }
                neuronPositions.push(layerPositions);
            });

            // Create connections
            for (let layer = 0; layer < layers.length - 1; layer++) {
                for (let from = 0; from < neuronPositions[layer].length; from++) {
                    for (let to = 0; to < neuronPositions[layer + 1].length; to++) {
                        const fromPos = neuronPositions[layer][from];
                        const toPos = neuronPositions[layer + 1][to];
                        
                        const connection = document.createElement('div');
                        connection.className = 'connection';
                        
                        const length = Math.sqrt(Math.pow(toPos.x - fromPos.x, 2) + Math.pow(toPos.y - fromPos.y, 2));
                        const angle = Math.atan2(toPos.y - fromPos.y, toPos.x - fromPos.x) * 180 / Math.PI;
                        
                        connection.style.left = fromPos.x + 'px';
                        connection.style.top = fromPos.y + 'px';
                        connection.style.width = length + 'px';
                        connection.style.transform = `rotate(${angle}deg)`;
                        connection.dataset.from = `${layer}-${from}`;
                        connection.dataset.to = `${layer + 1}-${to}`;
                        
                        container.appendChild(connection);
                    }
                }
            }
        }

        function propagateForward() {
            const neurons = document.querySelectorAll('.neuron');
            const connections = document.querySelectorAll('.connection');
            
            // Reset
            neurons.forEach(n => n.classList.remove('active'));
            connections.forEach(c => c.classList.remove('active'));
            
            // Animate propagation
            let delay = 0;
            
            // Input layer
            const inputNeurons = Array.from(neurons).filter(n => n.dataset.layer === '0');
            inputNeurons.forEach((neuron, index) => {
                setTimeout(() => {
                    neuron.classList.add('active');
                }, delay);
                delay += 200;
            });
            
            // Hidden and output layers
            const maxLayer = Math.max(...Array.from(neurons).map(n => parseInt(n.dataset.layer)));
            for (let layer = 1; layer <= maxLayer; layer++) {
                setTimeout(() => {
                    const layerNeurons = Array.from(neurons).filter(n => n.dataset.layer === String(layer));
                    layerNeurons.forEach(neuron => neuron.classList.add('active'));
                    
                    const layerConnections = Array.from(connections).filter(c => 
                        c.dataset.to.startsWith(layer + '-'));
                    layerConnections.forEach(conn => conn.classList.add('active'));
                }, delay);
                delay += 300;
            }
            
            setTimeout(() => {
                document.getElementById('network-status').textContent = 
                    'Propaga√ß√£o completa! Os dados flu√≠ram da entrada para a sa√≠da.';
            }, delay);
        }

        function resetNetwork() {
            const neurons = document.querySelectorAll('.neuron');
            const connections = document.querySelectorAll('.connection');
            
            neurons.forEach(n => n.classList.remove('active'));
            connections.forEach(c => c.classList.remove('active'));
            
            document.getElementById('network-status').textContent = 
                'Rede resetada. Clique em "Propaga√ß√£o Direta" para come√ßar.';
        }

        function randomizeWeights() {
            const connections = document.querySelectorAll('.connection');
            connections.forEach(conn => {
                const weight = Math.random();
                conn.style.opacity = weight;
                conn.style.height = Math.max(1, weight * 4) + 'px';
            });
            
            document.getElementById('network-status').textContent = 
                'Pesos randomizados! Espessura das conex√µes representa o peso.';
        }

        // Exerc√≠cio 3: Classifica√ß√£o
        function setDataClass(classIndex) {
            currentDataClass = classIndex;
            const buttons = document.querySelectorAll('.controls button');
            buttons.forEach(btn => btn.style.background = '');
            event.target.style.background = classIndex === 0 ? 'var(--primary)' : 'var(--error)';
        }

        function addDataPoint(event) {
            const rect = event.currentTarget.getBoundingClientRect();
            const x = event.clientX - rect.left;
            const y = event.clientY - rect.top;
            
            const point = document.createElement('div');
            point.className = `data-point class-${currentDataClass}`;
            point.style.left = (x - 4) + 'px';
            point.style.top = (y - 4) + 'px';
            
            event.currentTarget.appendChild(point);
            
            dataPoints.push({
                x: x / rect.width,
                y: y / rect.height,
                class: currentDataClass
            });
            
            document.getElementById('classification-result').textContent = 
                `Ponto adicionado! Total: ${dataPoints.length} pontos.`;
        }

        function trainClassifier() {
            if (dataPoints.length < 2) {
                document.getElementById('classification-result').textContent = 
                    'Adicione pelo menos 2 pontos para treinar!';
                return;
            }
            
            const classifierType = document.getElementById('classifier-type').value;
            
            // Simulate training delay
            document.getElementById('classification-result').textContent = 'Treinando classificador...';
            
            setTimeout(() => {
                updateDecisionBoundary(classifierType);
                const accuracy = Math.random() * 30 + 70; // 70-100%
                document.getElementById('classification-result').innerHTML = 
                    `<strong>Classificador ${classifierType.toUpperCase()} treinado!</strong><br>
                     Acur√°cia estimada: ${accuracy.toFixed(1)}%<br>
                     Pontos de treino: ${dataPoints.length}`;
            }, 1000);
        }

        function updateDecisionBoundary(type) {
            const boundary = document.getElementById('decision-boundary');
            const area = document.getElementById('classification-area');
            
            // Simple linear boundary for demo
            const angle = Math.random() * 360;
            const centerY = area.offsetHeight / 2;
            
            boundary.style.top = centerY + 'px';
            boundary.style.transform = `rotate(${angle}deg)`;
            boundary.style.display = 'block';
        }

        function clearData() {
            dataPoints = [];
            document.querySelectorAll('.data-point').forEach(point => point.remove());
            document.getElementById('decision-boundary').style.display = 'none';
            document.getElementById('classification-result').textContent = 
                'Dados limpos. Adicione novos pontos para come√ßar.';
        }

        // Exerc√≠cio 4: Quiz
        function loadQuizQuestion() {
            if (currentQuestionIndex >= quizQuestions.length) {
                showQuizResults();
                return;
            }
            
            const question = quizQuestions[currentQuestionIndex];
            document.getElementById('quiz-question').textContent = question.question;
            
            const optionsContainer = document.getElementById('quiz-options');
            optionsContainer.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'quiz-option';
                optionElement.textContent = option;
                optionElement.onclick = () => selectOption(index, optionElement);
                optionsContainer.appendChild(optionElement);
            });
            
            document.getElementById('quiz-feedback').style.display = 'none';
            selectedOption = null;
            
            // Update progress
            const progress = (currentQuestionIndex / quizQuestions.length) * 100;
            document.getElementById('quiz-progress').style.width = progress + '%';
        }

        function selectOption(index, element) {
            document.querySelectorAll('.quiz-option').forEach(opt => {
                opt.classList.remove('selected');
            });
            element.classList.add('selected');
            selectedOption = index;
        }

        function submitQuizAnswer() {
            if (selectedOption === null) {
                alert('Selecione uma op√ß√£o primeiro!');
                return;
            }
            
            const question = quizQuestions[currentQuestionIndex];
            const correct = selectedOption === question.correct;
            
            if (correct) {
                quizScore++;
            }
            
            // Show feedback
            const options = document.querySelectorAll('.quiz-option');
            options[question.correct].classList.add('correct');
            if (!correct) {
                options[selectedOption].classList.add('incorrect');
            }
            
            const feedback = document.getElementById('quiz-feedback');
            feedback.innerHTML = `
                <strong>${correct ? '‚úÖ Correto!' : '‚ùå Incorreto'}</strong><br>
                ${question.explanation}
            `;
            feedback.style.display = 'block';
        }

        function nextQuestion() {
            currentQuestionIndex++;
            loadQuizQuestion();
        }

        function showQuizResults() {
            const percentage = (quizScore / quizQuestions.length) * 100;
            document.getElementById('quiz-question').innerHTML = `
                <h3>üéâ Quiz Conclu√≠do!</h3>
                <p>Sua pontua√ß√£o: ${quizScore}/${quizQuestions.length} (${percentage.toFixed(1)}%)</p>
            `;
            
            document.getElementById('quiz-options').innerHTML = `
                <div style="text-align: center; padding: 2rem;">
                    <p>${percentage >= 70 ? 'Parab√©ns! Voc√™ domina os conceitos!' : 'Continue estudando para melhorar!'}</p>
                    <button class="btn" onclick="restartQuiz()">Refazer Quiz</button>
                </div>
            `;
            
            document.getElementById('quiz-progress').style.width = '100%';
        }

        function restartQuiz() {
            currentQuestionIndex = 0;
            quizScore = 0;
            selectedOption = null;
            loadQuizQuestion();
        }

        // Exerc√≠cio 5: Fun√ß√µes de Ativa√ß√£o
        function updateActivationChart() {
            const canvas = document.getElementById('activation-chart');
            const ctx = canvas.getContext('2d');
            
            // Clear canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Draw axes
            ctx.strokeStyle = '#666';
            ctx.lineWidth = 1;
            
            // X-axis
            ctx.beginPath();
            ctx.moveTo(50, canvas.height / 2);
            ctx.lineTo(canvas.width - 50, canvas.height / 2);
            ctx.stroke();
            
            // Y-axis
            ctx.beginPath();
            ctx.moveTo(canvas.width / 2, 50);
            ctx.lineTo(canvas.width / 2, canvas.height - 50);
            ctx.stroke();
            
            // Plot functions
            const functions = {
                'show-relu': { color: '#667eea', func: x => Math.max(0, x), name: 'ReLU' },
                'show-sigmoid': { color: '#f093fb', func: x => 1 / (1 + Math.exp(-x)), name: 'Sigmoid' },
                'show-tanh': { color: '#4ade80', func: x => Math.tanh(x), name: 'Tanh' },
                'show-leaky': { color: '#fbbf24', func: x => x > 0 ? x : 0.1 * x, name: 'Leaky ReLU' }
            };
            
            Object.keys(functions).forEach(checkboxId => {
                if (document.getElementById(checkboxId).checked) {
                    const func = functions[checkboxId];
                    plotFunction(ctx, func.func, func.color, canvas);
                }
            });
            
            // Add legend
            let legendY = 20;
            Object.keys(functions).forEach(checkboxId => {
                if (document.getElementById(checkboxId).checked) {
                    const func = functions[checkboxId];
                    ctx.fillStyle = func.color;
                    ctx.fillRect(canvas.width - 100, legendY, 15, 15);
                    ctx.fillStyle = '#333';
                    ctx.font = '12px Arial';
                    ctx.fillText(func.name, canvas.width - 80, legendY + 12);
                    legendY += 25;
                }
            });
        }

        function plotFunction(ctx, func, color, canvas) {
            ctx.strokeStyle = color;
            ctx.lineWidth = 2;
            ctx.beginPath();
            
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            const scale = 50;
            
            for (let x = -4; x <= 4; x += 0.1) {
                const canvasX = centerX + x * scale;
                const canvasY = centerY - func(x) * scale;
                
                if (x === -4) {
                    ctx.moveTo(canvasX, canvasY);
                } else {
                    ctx.lineTo(canvasX, canvasY);
                }
            }
            
            ctx.stroke();
        }

        // Exerc√≠cio 6: Simulador de Bias
        function simulateBias() {
            const groupAPercent = parseInt(document.getElementById('group-a-slider').value);
            const successAPercent = parseInt(document.getElementById('success-a-slider').value);
            const successBPercent = parseInt(document.getElementById('success-b-slider').value);
            
            const totalSamples = 1000;
            const groupASize = Math.floor(totalSamples * groupAPercent / 100);
            const groupBSize = totalSamples - groupASize;
            
            const successA = Math.floor(groupASize * successAPercent / 100);
            const successB = Math.floor(groupBSize * successBPercent / 100);
            
            const overallSuccess = (successA + successB) / totalSamples * 100;
            
            document.getElementById('bias-results').innerHTML = `
                <strong>Resultados da Simula√ß√£o:</strong><br>
                Grupo A: ${groupASize} amostras, ${successA} sucessos (${successAPercent}%)<br>
                Grupo B: ${groupBSize} amostras, ${successB} sucessos (${successBPercent}%)<br>
                <strong>Taxa geral de sucesso: ${overallSuccess.toFixed(1)}%</strong><br>
                ${groupAPercent !== 50 ? '‚ö†Ô∏è Dataset desbalanceado pode introduzir bias!' : '‚úÖ Dataset balanceado'}
            `;
            
            // Update chart
            updateBiasChart(groupAPercent, groupBSize * 100 / totalSamples, successAPercent, successBPercent);
        }

        function updateBiasChart(groupAPercent, groupBPercent, successA, successB) {
            const canvas = document.getElementById('bias-chart');
            const ctx = canvas.getContext('2d');
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Draw bars
            const barWidth = 80;
            const spacing = 50;
            
            // Group A representation
            ctx.fillStyle = '#667eea';
            ctx.fillRect(50, 150 - groupAPercent * 1.2, barWidth, groupAPercent * 1.2);
            ctx.fillStyle = '#333';
            ctx.font = '12px Arial';
            ctx.fillText('Grupo A', 55, 175);
            ctx.fillText(`${groupAPercent}%`, 65, 190);
            
            // Group B representation
            ctx.fillStyle = '#f093fb';
            ctx.fillRect(180, 150 - groupBPercent * 1.2, barWidth, groupBPercent * 1.2);
            ctx.fillText('Grupo B', 185, 175);
            ctx.fillText(`${groupBPercent.toFixed(0)}%`, 195, 190);
            
            // Success rates
            ctx.fillStyle = '#4ade80';
            ctx.fillRect(310, 150 - successA * 1.2, barWidth, successA * 1.2);
            ctx.fillStyle = '#333';
            ctx.fillText('Sucesso A', 315, 175);
            ctx.fillText(`${successA}%`, 335, 190);
            
            ctx.fillStyle = '#fbbf24';
            ctx.fillRect(440, 150 - successB * 1.2, barWidth, successB * 1.2);
            ctx.fillText('Sucesso B', 445, 175);
            ctx.fillText(`${successB}%`, 465, 190);
        }

        function generateBalancedDataset() {
            document.getElementById('group-a-slider').value = 50;
            document.getElementById('success-a-slider').value = 75;
            document.getElementById('success-b-slider').value = 75;
            
            // Update displays
            document.getElementById('group-a-percent').textContent = '50';
            document.getElementById('success-a-percent').textContent = '75';
            document.getElementById('success-b-percent').textContent = '75';
            
            simulateBias();
        }

        // Fun√ß√µes finais
        function generateCertificate() {
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%;
                background: rgba(0,0,0,0.8); display: flex; align-items: center;
                justify-content: center; z-index: 1000;
            `;
            
            modal.innerHTML = `
                <div style="background: white; padding: 3rem; border-radius: 1rem; text-align: center; max-width: 500px;">
                    <h2 style="color: var(--primary); margin-bottom: 1rem;">üèÜ Certificado de Conclus√£o</h2>
                    <p><strong>Fundamentos de Intelig√™ncia Artificial</strong></p>
                    <p>Exerc√≠cios Interativos Completados</p>
                    <p style="margin: 2rem 0;">Data: ${new Date().toLocaleDateString('pt-BR')}</p>
                    <button class="btn" onclick="this.parentElement.parentElement.remove()">Fechar</button>
                    <button class="btn" onclick="window.print()">Imprimir</button>
                </div>
            `;
            
            document.body.appendChild(modal);
        }

        function shareProgress() {
            if (navigator.share) {
                navigator.share({
                    title: 'Cody Verse - Exerc√≠cios de IA',
                    text: 'Completei os exerc√≠cios interativos de Fundamentos de IA!',
                    url: window.location.href
                });
            } else {
                // Fallback
                const text = 'Completei os exerc√≠cios interativos de Fundamentos de IA no Cody Verse!';
                navigator.clipboard.writeText(text + ' ' + window.location.href);
                alert('Link copiado para a √°rea de transfer√™ncia!');
            }
        }
    </script>
</body>
</html>