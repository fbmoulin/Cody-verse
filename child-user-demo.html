<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CodyVerse Kids - Aprenda Programa√ß√£o Brincando!</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Comic Sans MS', cursive, sans-serif;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4, #feca57);
            background-size: 400% 400%;
            animation: gradientShift 8s ease infinite;
            min-height: 100vh;
            color: #333;
            font-size: 18px;
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            background: white;
            border-radius: 25px;
            padding: 30px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            border: 5px solid #ff6b6b;
        }

        .header h1 {
            font-size: 3rem;
            color: #ff6b6b;
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .header p {
            font-size: 1.4rem;
            color: #4ecdc4;
            font-weight: bold;
        }

        .welcome-card {
            background: white;
            border-radius: 25px;
            padding: 30px;
            margin-bottom: 25px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            border: 5px solid #4ecdc4;
            text-align: center;
        }

        .welcome-message {
            font-size: 2rem;
            color: #ff6b6b;
            margin-bottom: 20px;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 25px 0;
        }

        .stat-card {
            background: white;
            border-radius: 20px;
            padding: 25px;
            text-align: center;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            border: 4px solid #feca57;
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: scale(1.05) rotate(2deg);
        }

        .stat-value {
            font-size: 3rem;
            font-weight: bold;
            color: #ff6b6b;
            margin-bottom: 10px;
        }

        .stat-label {
            font-size: 1.2rem;
            color: #4ecdc4;
            font-weight: bold;
        }

        .exercise-section {
            background: white;
            border-radius: 25px;
            padding: 30px;
            margin-bottom: 25px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            border: 5px solid #96ceb4;
        }

        .section-title {
            font-size: 2.2rem;
            color: #ff6b6b;
            margin-bottom: 20px;
            text-align: center;
        }

        .exercise-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .exercise-card {
            background: linear-gradient(135deg, #feca57, #ff9ff3);
            border-radius: 20px;
            padding: 25px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 3px solid white;
        }

        .exercise-card:hover {
            transform: scale(1.1) rotate(-2deg);
            box-shadow: 0 15px 30px rgba(0,0,0,0.2);
        }

        .exercise-icon {
            font-size: 3rem;
            margin-bottom: 15px;
        }

        .exercise-title {
            font-size: 1.3rem;
            color: white;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .exercise-description {
            font-size: 1rem;
            color: white;
            opacity: 0.9;
        }

        .button {
            background: linear-gradient(135deg, #ff6b6b, #4ecdc4);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 50px;
            font-size: 1.3rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px;
            border: 3px solid white;
        }

        .button:hover {
            transform: scale(1.1);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }

        .achievements-section {
            background: white;
            border-radius: 25px;
            padding: 30px;
            margin-bottom: 25px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            border: 5px solid #ff9ff3;
        }

        .badge {
            display: inline-block;
            background: linear-gradient(135deg, #feca57, #ff6b6b);
            color: white;
            padding: 10px 20px;
            border-radius: 50px;
            margin: 5px;
            font-weight: bold;
            border: 2px solid white;
            animation: sparkle 2s infinite;
        }

        @keyframes sparkle {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .progress-bar {
            background: #f0f0f0;
            border-radius: 50px;
            padding: 3px;
            margin: 15px 0;
            border: 2px solid #4ecdc4;
        }

        .progress-fill {
            background: linear-gradient(135deg, #4ecdc4, #44a08d);
            height: 30px;
            border-radius: 50px;
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .encouragement {
            background: linear-gradient(135deg, #96ceb4, #4ecdc4);
            color: white;
            padding: 20px;
            border-radius: 20px;
            text-align: center;
            font-size: 1.4rem;
            margin: 20px 0;
            border: 3px solid white;
            animation: pulse 3s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }

        .response-area {
            background: #f8f9fa;
            border: 3px dashed #4ecdc4;
            border-radius: 15px;
            padding: 20px;
            margin: 15px 0;
            min-height: 100px;
            font-family: 'Courier New', monospace;
            max-height: 200px;
            overflow-y: auto;
        }

        .loading {
            text-align: center;
            font-size: 1.5rem;
            color: #ff6b6b;
            animation: bounce 1s infinite;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üåü CodyVerse Kids üåü</h1>
            <p>Aprenda programa√ß√£o brincando!</p>
        </div>

        <div class="welcome-card">
            <div class="welcome-message" id="welcomeMessage">
                Carregando sua aventura...
            </div>
            <button class="button" onclick="registerChild()">
                üéä Criar Minha Conta Kids!
            </button>
            <div class="response-area" id="registrationResponse" style="display: none;"></div>
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-value" id="coinsValue">100</div>
                <div class="stat-label">ü™ô Moedas M√°gicas</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="levelValue">1</div>
                <div class="stat-label">‚≠ê N√≠vel</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="xpValue">0</div>
                <div class="stat-label">‚ú® Pontos XP</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">15</div>
                <div class="stat-label">‚è∞ Min por Li√ß√£o</div>
            </div>
        </div>

        <div class="exercise-section">
            <div class="section-title">üéÆ Exerc√≠cios Divertidos</div>
            <div class="exercise-grid">
                <div class="exercise-card" onclick="showExercise('drag_drop')">
                    <div class="exercise-icon">üéØ</div>
                    <div class="exercise-title">Arrastar e Soltar</div>
                    <div class="exercise-description">Arraste as pe√ßas para o lugar certo!</div>
                </div>
                <div class="exercise-card" onclick="showExercise('matching')">
                    <div class="exercise-icon">üß©</div>
                    <div class="exercise-title">Jogo da Mem√≥ria</div>
                    <div class="exercise-description">Encontre os pares iguais!</div>
                </div>
                <div class="exercise-card" onclick="showExercise('coloring')">
                    <div class="exercise-icon">üé®</div>
                    <div class="exercise-title">Colorir C√≥digos</div>
                    <div class="exercise-description">Pinte os comandos com cores!</div>
                </div>
                <div class="exercise-card" onclick="showExercise('simple_quiz')">
                    <div class="exercise-icon">‚ùì</div>
                    <div class="exercise-title">Quiz F√°cil</div>
                    <div class="exercise-description">Perguntas super f√°ceis!</div>
                </div>
            </div>
            
            <div style="text-align: center;">
                <button class="button" onclick="generateChildExercises()">
                    üöÄ Gerar Novos Exerc√≠cios!
                </button>
            </div>
            <div class="response-area" id="exerciseResponse" style="display: none;"></div>
        </div>

        <div class="achievements-section">
            <div class="section-title">üèÜ Minhas Conquistas</div>
            <div id="badgesArea">
                <span class="badge">üåü Primeira Li√ß√£o!</span>
                <span class="badge">üéØ Acertou Tudo!</span>
                <span class="badge">üî• Sequ√™ncia de 3!</span>
            </div>
            
            <div class="progress-bar">
                <div class="progress-fill" style="width: 60%">60% para pr√≥ximo n√≠vel!</div>
            </div>
            
            <div class="encouragement" id="encouragementMessage">
                Voc√™ est√° indo muito bem! Continue assim! üåü
            </div>
            
            <div style="text-align: center;">
                <button class="button" onclick="completeLesson()">
                    ‚úÖ Completar Li√ß√£o!
                </button>
                <button class="button" onclick="getChildDashboard()">
                    üìä Ver Meu Progresso!
                </button>
            </div>
            <div class="response-area" id="dashboardResponse" style="display: none;"></div>
        </div>
    </div>

    <script>
        let childData = {
            name: 'Sofia Silva',
            age: 8,
            coins: 100,
            level: 1,
            xp: 0
        };

        async function registerChild() {
            const responseArea = document.getElementById('registrationResponse');
            responseArea.style.display = 'block';
            responseArea.innerHTML = '<div class="loading">Criando sua conta m√°gica...</div>';
            
            try {
                const response = await fetch('/api/age-adaptation/register', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        name: 'Sofia Silva',
                        email: 'sofia@escola.com',
                        birthDate: '2016-12-05'
                    })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    document.getElementById('welcomeMessage').textContent = data.data.welcomeMessage;
                    document.getElementById('coinsValue').textContent = data.data.initialSetup.startingCoins;
                    
                    responseArea.innerHTML = `
                        <div style="color: #4ecdc4; font-weight: bold; font-size: 1.2rem;">
                            üéâ Conta criada com sucesso!<br>
                            Idade: ${data.data.user.age} anos<br>
                            Grupo: ${data.data.user.ageGroup}<br>
                            Moedas iniciais: ${data.data.initialSetup.startingCoins}
                        </div>
                    `;
                } else {
                    responseArea.innerHTML = '<div style="color: #ff6b6b;">Ops! Algo deu errado. Vamos tentar de novo!</div>';
                }
            } catch (error) {
                responseArea.innerHTML = '<div style="color: #ff6b6b;">Erro: ' + error.message + '</div>';
            }
        }

        async function generateChildExercises() {
            const responseArea = document.getElementById('exerciseResponse');
            responseArea.style.display = 'block';
            responseArea.innerHTML = '<div class="loading">Criando exerc√≠cios divertidos...</div>';
            
            try {
                const response = await fetch('/api/age-adaptation/exercises', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        topic: 'programa√ß√£o para crian√ßas',
                        ageGroup: 'child',
                        difficulty: 'easy'
                    })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    const exercises = data.data.exercises;
                    let exerciseHtml = '<div style="color: #4ecdc4; font-weight: bold;">üéÆ Exerc√≠cios Gerados:</div>';
                    
                    exercises.forEach((exercise, index) => {
                        exerciseHtml += `
                            <div style="margin: 10px 0; padding: 10px; background: #e8f5e8; border-radius: 8px;">
                                <strong>${index + 1}. ${exercise.type.replace(/_/g, ' ')}</strong><br>
                                T√≥pico: ${exercise.topic}<br>
                                Dificuldade: ${exercise.difficulty}
                            </div>
                        `;
                    });
                    
                    exerciseHtml += `<div style="color: #ff6b6b; margin-top: 10px;">
                        ‚è∞ Tempo estimado: ${data.data.metadata.estimatedTime} minutos
                    </div>`;
                    
                    responseArea.innerHTML = exerciseHtml;
                } else {
                    responseArea.innerHTML = '<div style="color: #ff6b6b;">Ops! N√£o consegui criar os exerc√≠cios.</div>';
                }
            } catch (error) {
                responseArea.innerHTML = '<div style="color: #ff6b6b;">Erro: ' + error.message + '</div>';
            }
        }

        async function completeLesson() {
            try {
                const response = await fetch('/api/gamification/lesson-complete/1', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        lessonId: 1,
                        timeSpent: 12,
                        score: 95,
                        exerciseType: 'drag_drop'
                    })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    // Update stats with child-friendly animations
                    childData.xp += 20;
                    childData.coins += 15;
                    
                    document.getElementById('xpValue').textContent = childData.xp;
                    document.getElementById('coinsValue').textContent = childData.coins;
                    
                    // Show celebration
                    document.getElementById('encouragementMessage').innerHTML = 
                        'üéâ Parab√©ns! Voc√™ completou mais uma li√ß√£o! Ganhou moedas! ü™ô‚ú®';
                    
                    // Add new badge
                    const badgesArea = document.getElementById('badgesArea');
                    const newBadge = document.createElement('span');
                    newBadge.className = 'badge';
                    newBadge.textContent = 'üéØ Li√ß√£o Completada!';
                    badgesArea.appendChild(newBadge);
                }
            } catch (error) {
                console.error('Erro ao completar li√ß√£o:', error);
            }
        }

        async function getChildDashboard() {
            const responseArea = document.getElementById('dashboardResponse');
            responseArea.style.display = 'block';
            responseArea.innerHTML = '<div class="loading">Carregando seu progresso...</div>';
            
            try {
                const response = await fetch('/api/gamification/dashboard/1');
                const data = await response.json();
                
                if (data.success) {
                    responseArea.innerHTML = `
                        <div style="color: #4ecdc4; font-weight: bold;">üìä Seu Progresso:</div>
                        <div style="margin: 10px 0;">
                            <strong>N√≠vel:</strong> ${data.data.level || 1}<br>
                            <strong>XP Total:</strong> ${data.data.totalXP || 0}<br>
                            <strong>Moedas:</strong> ${data.data.wallet?.coins || 0}<br>
                            <strong>Sequ√™ncia Atual:</strong> ${data.data.streaks?.current_streak || 0} dias
                        </div>
                        <div style="color: #ff6b6b;">
                            ${data.data.adaptedMessages?.encouragement || 'Continue assim!'}
                        </div>
                    `;
                } else {
                    responseArea.innerHTML = '<div style="color: #ff6b6b;">N√£o consegui carregar seu progresso.</div>';
                }
            } catch (error) {
                responseArea.innerHTML = '<div style="color: #ff6b6b;">Erro: ' + error.message + '</div>';
            }
        }

        function showExercise(type) {
            const exercises = {
                'drag_drop': 'üéØ Arraste o comando "print" para a caixa verde!',
                'matching': 'üß© Encontre o par: if = se, for = para',
                'coloring': 'üé® Pinte todos os comandos de azul!',
                'simple_quiz': '‚ùì O que faz o comando "print"? a) Escreve na tela b) Apaga c) Calcula'
            };
            
            alert(exercises[type] || 'Exerc√≠cio em desenvolvimento!');
        }

        // Initialize welcome message
        document.getElementById('welcomeMessage').textContent = 'Ol√°! Que bom te ver aqui! üåü';
        
        console.log('CodyVerse Kids Demo inicializado com sucesso!');
    </script>
</body>
</html>