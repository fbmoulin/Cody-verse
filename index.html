<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cody Verse - Plataforma Educacional Otimizada</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --color-primary: #667eea;
            --color-secondary: #764ba2;
            --color-accent: #f093fb;
            --color-success: #4ade80;
            --color-warning: #fbbf24;
            --color-error: #ef4444;
            --color-background: #ffffff;
            --color-surface: #f8fafc;
            --color-text: #1f2937;
            --color-text-secondary: #6b7280;
            --color-border: #e5e7eb;
            --font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
            --radius-md: 0.5rem;
            --radius-lg: 0.75rem;
            --radius-xl: 1rem;
            --blur-glass: blur(10px);
            --opacity-glass: 0.95;
        }

        /* Dark Mode Variables */
        [data-theme="dark"] {
            --color-background: #0f172a;
            --color-surface: #1e293b;
            --color-text: #f1f5f9;
            --color-text-secondary: #94a3b8;
            --color-border: #334155;
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.3);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.4);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.4);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.5);
            --opacity-glass: 0.85;
        }

        /* Auto Dark Mode Detection */
        @media (prefers-color-scheme: dark) {
            :root:not([data-theme]) {
                --color-background: #0f172a;
                --color-surface: #1e293b;
                --color-text: #f1f5f9;
                --color-text-secondary: #94a3b8;
                --color-border: #334155;
                --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.3);
                --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.4);
                --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.4);
                --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.5);
                --opacity-glass: 0.85;
            }
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            line-height: 1.5;
            -webkit-text-size-adjust: 100%;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        body {
            font-family: var(--font-family);
            background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-secondary) 100%);
            min-height: 100vh;
            overflow-x: hidden;
            transition: all 0.3s ease;
        }

        /* Enhanced Dark Mode Background */
        [data-theme="dark"] body,
        @media (prefers-color-scheme: dark) {
            :root:not([data-theme]) body {
                background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
            }
        }
        
        /* Enhanced Navigation */
        .navbar {
            background: rgba(255, 255, 255, var(--opacity-glass));
            backdrop-filter: var(--blur-glass);
            padding: 1rem 2rem;
            box-shadow: var(--shadow-md);
            position: sticky;
            top: 0;
            z-index: 100;
            transition: all 0.3s ease;
            border-bottom: 1px solid var(--color-border);
        }

        [data-theme="dark"] .navbar {
            background: rgba(30, 41, 59, var(--opacity-glass));
        }

        @media (prefers-color-scheme: dark) {
            :root:not([data-theme]) .navbar {
                background: rgba(30, 41, 59, var(--opacity-glass));
            }
        }

        .navbar-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--color-primary), var(--color-secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .nav-links {
            display: flex;
            gap: 1.5rem;
            list-style: none;
        }

        .nav-link {
            text-decoration: none;
            color: var(--color-text);
            font-weight: 500;
            padding: 0.5rem 1rem;
            border-radius: var(--radius-md);
            transition: all 0.2s ease;
        }

        .nav-link:hover {
            background: rgba(102, 126, 234, 0.1);
            color: var(--color-primary);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }
        
        .header {
            background: rgba(255, 255, 255, var(--opacity-glass));
            backdrop-filter: var(--blur-glass);
            border-radius: var(--radius-xl);
            padding: 3rem;
            text-align: center;
            margin-bottom: 3rem;
            box-shadow: var(--shadow-xl);
            border: 1px solid var(--color-border);
            transition: all 0.3s ease;
        }

        [data-theme="dark"] .header {
            background: rgba(30, 41, 59, var(--opacity-glass));
        }

        @media (prefers-color-scheme: dark) {
            :root:not([data-theme]) .header {
                background: rgba(30, 41, 59, var(--opacity-glass));
            }
        }
        
        .header h1 {
            color: var(--color-text);
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, var(--color-primary), var(--color-secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .header p {
            color: var(--color-text-secondary);
            font-size: 1.25rem;
            max-width: 600px;
            margin: 0 auto;
        }

        /* Stats Overview */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 3rem;
        }

        .stat-card {
            background: rgba(255, 255, 255, var(--opacity-glass));
            backdrop-filter: var(--blur-glass);
            padding: 2rem;
            border-radius: var(--radius-lg);
            text-align: center;
            box-shadow: var(--shadow-md);
            transition: all 0.3s ease;
            border: 1px solid var(--color-border);
        }

        [data-theme="dark"] .stat-card {
            background: rgba(30, 41, 59, var(--opacity-glass));
        }

        @media (prefers-color-scheme: dark) {
            :root:not([data-theme]) .stat-card {
                background: rgba(30, 41, 59, var(--opacity-glass));
            }
        }

        .stat-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--color-primary), var(--color-secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 0.5rem;
        }

        .stat-label {
            color: var(--color-text-secondary);
            font-size: 0.875rem;
            font-weight: 500;
        }
        
        .course-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(380px, 1fr));
            gap: 2rem;
        }
        
        .module-card {
            background: rgba(255, 255, 255, var(--opacity-glass));
            backdrop-filter: var(--blur-glass);
            border-radius: var(--radius-xl);
            padding: 2rem;
            box-shadow: var(--shadow-lg);
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            border: 1px solid var(--color-border);
        }

        [data-theme="dark"] .module-card {
            background: rgba(30, 41, 59, var(--opacity-glass));
        }

        @media (prefers-color-scheme: dark) {
            :root:not([data-theme]) .module-card {
                background: rgba(30, 41, 59, var(--opacity-glass));
            }
        }
        
        .module-card:hover {
            transform: translateY(-8px);
            box-shadow: var(--shadow-xl);
        }
        
        .module-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--accent-color), var(--color-primary));
        }

        .module-card::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transform: rotate(45deg);
            transition: all 0.5s ease;
            opacity: 0;
        }

        .module-card:hover::after {
            opacity: 1;
            animation: shimmer 0.8s ease-in-out;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }
        
        .module-header {
            display: flex;
            align-items: center;
            margin-bottom: 1.5rem;
        }
        
        .module-icon {
            width: 4rem;
            height: 4rem;
            border-radius: var(--radius-lg);
            background: linear-gradient(135deg, var(--accent-color), var(--color-primary));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            font-weight: 700;
            margin-right: 1.5rem;
            box-shadow: var(--shadow-md);
        }
        
        .module-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--color-text);
            margin: 0;
        }
        
        .module-description {
            color: var(--color-text-secondary);
            line-height: 1.6;
            margin-bottom: 1.5rem;
            font-size: 1rem;
        }

        /* Progress Bar */
        .progress-container {
            margin-bottom: 1.5rem;
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
            font-size: 0.875rem;
            font-weight: 500;
        }

        .progress-bar {
            height: 8px;
            background: rgba(0, 0, 0, 0.1);
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--color-primary), var(--color-accent));
            border-radius: 4px;
            transition: width 0.5s ease;
            position: relative;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            animation: progress-shimmer 2s infinite;
        }

        @keyframes progress-shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        .module-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }
        
        .difficulty-badge {
            background: linear-gradient(135deg, var(--accent-color), var(--color-primary));
            color: white;
            padding: 0.5rem 1rem;
            border-radius: var(--radius-md);
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            box-shadow: var(--shadow-sm);
        }
        
        .module-stats {
            display: flex;
            gap: 1rem;
            font-size: 0.875rem;
            color: var(--color-text-secondary);
        }
        
        .stat-item {
            display: flex;
            align-items: center;
            gap: 0.25rem;
            font-weight: 500;
        }

        .action-button {
            background: linear-gradient(135deg, var(--color-primary), var(--color-secondary));
            color: white;
            border: none;
            padding: 0.75rem 2rem;
            border-radius: var(--radius-md);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-md);
            margin-top: 1rem;
            width: 100%;
        }

        .action-button:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        .beginner { --accent-color: var(--color-success); }
        .intermediate { --accent-color: var(--color-warning); }
        .advanced { --accent-color: var(--color-error); }
        
        .nav-buttons {
            display: flex;
            justify-content: center;
            gap: 1.5rem;
            margin: 3rem 0;
        }
        
        .btn {
            padding: 1rem 2rem;
            border: none;
            border-radius: var(--radius-md);
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            box-shadow: var(--shadow-md);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--color-primary), var(--color-secondary));
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        .btn-secondary {
            background: rgba(255, 255, 255, 0.9);
            color: var(--color-primary);
            border: 2px solid rgba(102, 126, 234, 0.3);
            backdrop-filter: blur(10px);
        }
        
        .btn-secondary:hover {
            background: white;
            border-color: var(--color-primary);
            transform: translateY(-2px);
        }

        /* Performance Indicator */
        .performance-indicator {
            position: fixed;
            bottom: 1rem;
            left: 1rem;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: var(--radius-md);
            font-size: 0.75rem;
            z-index: 1000;
            backdrop-filter: blur(10px);
        }

        .pulse-dot {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--color-success);
            margin-right: 0.5rem;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .navbar-content {
                flex-direction: column;
                gap: 1rem;
            }

            .nav-links {
                gap: 1rem;
            }

            .container {
                padding: 1rem;
            }

            .header h1 {
                font-size: 2rem;
            }

            .header p {
                font-size: 1rem;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .course-grid {
                grid-template-columns: 1fr;
            }

            .nav-buttons {
                flex-direction: column;
                align-items: center;
            }
        }

        /* Loading Animation */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.6s ease-out;
        }

        /* Cody Avatar Styles */
        .cody-container {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            z-index: 1000;
        }
        
        .cody-avatar {
            width: 5rem;
            height: 5rem;
            background: linear-gradient(135deg, var(--color-primary), var(--color-secondary));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
            transition: all 0.3s ease;
            border: 3px solid white;
        }
        
        .cody-avatar:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 25px rgba(0,0,0,0.4);
        }
        
        .cody-face {
            font-size: 30px;
            color: white;
            animation: bounce 2s infinite;
        }
        
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }
        
        .cody-chat {
            position: absolute;
            bottom: 100px;
            right: 0;
            background: white;
            border-radius: 12px;
            padding: 20px;
            max-width: 320px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            transform: scale(0);
            transform-origin: bottom right;
            transition: all 0.3s ease;
        }
        
        .cody-chat.active {
            transform: scale(1);
        }
        
        .cody-chat::after {
            content: '';
            position: absolute;
            bottom: -10px;
            right: 30px;
            width: 0;
            height: 0;
            border-left: 10px solid transparent;
            border-right: 10px solid transparent;
            border-top: 10px solid white;
        }
        
        .cody-message {
            margin-bottom: 15px;
            line-height: 1.5;
        }
        
        .cody-options {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .cody-option {
            background: #f0f0f0;
            border: none;
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9em;
            transition: background 0.2s ease;
        }
        
        .cody-option:hover {
            background: #e0e0e0;
        }
        
        .cody-notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 20px;
            border-radius: 8px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
            transform: translateX(400px);
            transition: transform 0.3s ease;
            z-index: 1001;
        }
        
        .cody-notification.show {
            transform: translateX(0);
        }
        
        /* Learning Interface Styles */
        .learning-container {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #f5f5f5;
            z-index: 999;
            overflow-y: auto;
        }
        
        .learning-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: relative;
        }
        
        .learning-header h1 {
            margin: 0;
            font-size: 1.8em;
        }
        
        .learning-header p {
            margin: 5px 0 0 0;
            opacity: 0.9;
        }
        
        .close-learning {
            position: absolute;
            top: 20px;
            right: 30px;
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            font-size: 1.5em;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            transition: background 0.2s ease;
        }
        
        .close-learning:hover {
            background: rgba(255,255,255,0.3);
        }
        
        .lesson-content {
            max-width: 800px;
            margin: 0 auto;
            padding: 30px 20px;
            background: white;
            min-height: calc(100vh - 160px);
            margin-top: 20px;
            margin-bottom: 20px;
            border-radius: 12px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }
        
        .lesson-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        
        .lesson-progress {
            flex: 1;
            margin: 0 20px;
        }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4caf50 0%, #45a049 100%);
            border-radius: 4px;
            transition: width 0.3s ease;
        }
        
        .btn-nav {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-back {
            background: #6c757d;
            color: white;
        }
        
        .btn-back:hover {
            background: #5a6268;
        }
        
        .btn-next {
            background: #28a745;
            color: white;
        }
        
        .btn-next:hover {
            background: #218838;
        }
        
        .lesson-type-badge {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 600;
            margin-bottom: 20px;
        }
        
        .type-theory { background: #e3f2fd; color: #1976d2; }
        .type-interactive { background: #f3e5f5; color: #7b1fa2; }
        .type-lab { background: #e8f5e8; color: #388e3c; }
        .type-quiz { background: #fff3e0; color: #f57c00; }
        
        .quiz-container {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 25px;
            margin: 20px 0;
        }
        
        .quiz-question {
            font-size: 1.2em;
            font-weight: 600;
            margin-bottom: 20px;
            color: #333;
        }
        
        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .quiz-option {
            padding: 15px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            background: white;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .quiz-option:hover {
            border-color: #667eea;
            background: #f0f2ff;
        }
        
        .quiz-option.selected {
            border-color: #667eea;
            background: #667eea;
            color: white;
        }
        
        .quiz-option.correct {
            border-color: #4caf50;
            background: #4caf50;
            color: white;
        }
        
        .quiz-option.incorrect {
            border-color: #f44336;
            background: #f44336;
            color: white;
        }
        
        .lesson-complete {
            text-align: center;
            padding: 40px;
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
            border-radius: 12px;
            margin: 30px 0;
        }
        
        .xp-earned {
            font-size: 2em;
            font-weight: bold;
            margin: 15px 0;
        }
        
        .lesson-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #e0e0e0;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 1000;
        }
        
        .modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            border-radius: 12px;
            padding: 30px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .close {
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 30px;
            cursor: pointer;
            color: #999;
        }
        
        .close:hover {
            color: #333;
        }
        
        .lessons-list {
            margin-top: 20px;
        }
        
        .lesson-item {
            padding: 12px;
            border: 1px solid #eee;
            border-radius: 6px;
            margin-bottom: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
        }
        
        .lesson-item:hover {
            background: #f8f9fa;
        }
        
        /* Enhanced lesson content styles */
        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .info-card {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }
        
        .interactive-demo {
            background: #fff3cd;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        
        .demo-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 10px 15px;
            margin: 5px;
            border-radius: 5px;
            cursor: pointer;
        }
        
        .demo-result {
            margin-top: 15px;
            padding: 10px;
            background: white;
            border-radius: 5px;
            min-height: 50px;
        }
        
        .ml-simulator {
            border: 2px solid #667eea;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .ml-tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid #ddd;
        }
        
        .ml-tab {
            padding: 10px 20px;
            border: none;
            background: none;
            cursor: pointer;
            border-bottom: 2px solid transparent;
        }
        
        .ml-tab.active {
            border-bottom-color: #667eea;
            color: #667eea;
            font-weight: bold;
        }
        
        .ml-content {
            display: none;
        }
        
        .ml-content.active {
            display: block;
        }
        
        .email-sample {
            padding: 8px;
            margin: 5px 0;
            border-radius: 5px;
        }
        
        .email-sample.spam {
            background: #ffebee;
            border-left: 3px solid #f44336;
        }
        
        .email-sample.normal {
            background: #e8f5e8;
            border-left: 3px solid #4caf50;
        }
        
        .ethics-principles {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .principle-card {
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            background: #fafafa;
        }
        
        .case-studies {
            margin: 20px 0;
        }
        
        .case-study {
            background: #f0f0f0;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
        }
        
        .ethical-solution {
            background: #d4edda;
            padding: 10px;
            margin-top: 10px;
            border-radius: 5px;
            border-left: 3px solid #28a745;
        }
        
        .quiz-container {
            max-width: 600px;
            margin: 0 auto;
        }
        
        .question-counter {
            text-align: center;
            margin-bottom: 20px;
            font-weight: bold;
        }
        
        .quiz-navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }
        
        .score-circle {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: #667eea;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: bold;
            margin: 20px auto;
        }

        /* Progress Interface Styles */
        #progressContainer {
            display: none;
            background: white;
            border-radius: 12px;
            padding: 30px;
            margin-top: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .progress-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #f0f0f0;
        }

        .progress-header h2 {
            color: #333;
            margin: 0;
        }

        .progress-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .progress-card {
            background: #f8f9ff;
            border-radius: 12px;
            padding: 25px;
            border-left: 4px solid #667eea;
            transition: transform 0.3s ease;
        }

        .progress-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }

        .progress-card.full-width {
            grid-column: 1 / -1;
        }

        .progress-card h3 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 1.2rem;
        }

        .level-display {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .level-icon-large {
            font-size: 4rem;
            line-height: 1;
        }

        .level-info h4 {
            color: #333;
            margin-bottom: 8px;
        }

        .xp-progress-bar {
            background: #e9ecef;
            border-radius: 10px;
            height: 12px;
            overflow: hidden;
            margin: 10px 0;
        }

        .xp-fill {
            background: linear-gradient(90deg, #667eea, #764ba2);
            height: 100%;
            border-radius: 10px;
            transition: width 0.8s ease;
        }

        .wallet-stats {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
        }

        .currency-item {
            text-align: center;
        }

        .currency-icon {
            font-size: 2rem;
            display: block;
            margin-bottom: 8px;
        }

        .currency-amount {
            font-size: 1.8rem;
            font-weight: bold;
            color: #667eea;
            display: block;
        }

        .currency-label {
            color: #666;
            font-size: 0.9rem;
        }

        .streak-info {
            text-align: center;
        }

        .streak-current {
            font-size: 3rem;
            font-weight: bold;
            color: #ff6b35;
            margin-bottom: 10px;
        }

        .goals-progress {
            space-y: 15px;
        }

        .goal-item {
            background: white;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 12px;
            border-left: 4px solid #667eea;
        }

        .goal-item.completed {
            background: #d4edda;
            border-left-color: #28a745;
        }

        .goal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
            font-weight: bold;
        }

        .goal-progress-bar {
            background: #e9ecef;
            border-radius: 8px;
            height: 8px;
            overflow: hidden;
        }

        .goal-fill {
            background: linear-gradient(90deg, #667eea, #764ba2);
            height: 100%;
            border-radius: 8px;
            transition: width 0.5s ease;
        }

        .goal-item.completed .goal-fill {
            background: linear-gradient(90deg, #28a745, #20c997);
        }

        .badges-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 15px;
        }

        .badge-item {
            background: linear-gradient(135deg, #ffd700, #ffa500);
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            color: white;
            transition: transform 0.3s ease;
        }

        .badge-item:hover {
            transform: scale(1.05);
        }

        .badge-icon {
            font-size: 2rem;
            margin-bottom: 8px;
        }

        .badge-name {
            font-size: 0.85rem;
            font-weight: bold;
        }

        .activity-list {
            max-height: 300px;
            overflow-y: auto;
        }

        .activity-item {
            display: flex;
            align-items: flex-start;
            padding: 15px;
            margin-bottom: 10px;
            background: white;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }

        .activity-icon {
            font-size: 1.5rem;
            margin-right: 15px;
            margin-top: 2px;
        }

        .activity-content {
            flex: 1;
        }

        .activity-content strong {
            color: #333;
            display: block;
            margin-bottom: 5px;
        }

        .activity-content p {
            color: #666;
            margin-bottom: 5px;
            line-height: 1.4;
        }

        .activity-content small {
            color: #999;
            font-size: 0.8rem;
        }

        .progress-actions {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 2px solid #f0f0f0;
        }

        .loading-message {
            text-align: center;
            padding: 40px;
            color: #666;
            font-size: 1.1rem;
        }
    </style>
</head>
<body>
    <!-- Enhanced Navigation -->
    <nav class="navbar">
        <div class="navbar-content">
            <div class="logo">üéì Cody Verse</div>
            <ul class="nav-links">
                <li><a href="#dashboard" class="nav-link">Dashboard</a></li>
                <li><a href="#courses" class="nav-link">Cursos</a></li>
                <li><a href="#progress" class="nav-link">Progresso</a></li>
                <li><a href="enhanced-performance-dashboard.html" class="nav-link">Performance</a></li>
            </ul>
            
            <!-- Dark Mode Toggle -->
            <div class="theme-controls">
                <button class="theme-toggle" id="themeToggle" aria-label="Alternar modo escuro">
                    <span class="theme-icon sun-icon">‚òÄÔ∏è</span>
                    <span class="theme-icon moon-icon">üåô</span>
                </button>
                <button class="mobile-menu-toggle" id="mobileMenuToggle" aria-label="Menu mobile">
                    <span class="hamburger"></span>
                    <span class="hamburger"></span>
                    <span class="hamburger"></span>
                </button>
            </div>
        </div>
    </nav>

    <div class="container fade-in">
        <div class="header">
            <h1>Cody Verse</h1>
            <p>Plataforma educacional otimizada com IA avan√ßada, gamifica√ß√£o inteligente e aprendizado adaptativo personalizado</p>
        </div>

        <!-- Stats Overview -->
        <div class="stats-grid fade-in">
            <div class="stat-card">
                <div class="stat-number" id="total-courses">5</div>
                <div class="stat-label">Cursos Dispon√≠veis</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="total-lessons">27</div>
                <div class="stat-label">Li√ß√µes Totais</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="user-xp">2,450</div>
                <div class="stat-label">XP Conquistado</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="completion-rate">68%</div>
                <div class="stat-label">Taxa de Conclus√£o</div>
            </div>
        </div>
        
        <div class="nav-buttons fade-in">
            <button class="btn btn-primary" onclick="showDashboard()">üìä Dashboard do Curso</button>
            <button class="btn btn-secondary" id="progressBtn">üéØ Meu Progresso</button>
            <a href="optimized-codyverse-app.html" class="btn btn-secondary">üöÄ Vers√£o Aprimorada</a>
            <a href="enhanced-performance-dashboard.html" class="btn btn-secondary">‚ö° Performance</a>
        </div>
        
        <div class="course-grid" id="courseGrid">
            <!-- Course modules will be populated by JavaScript -->
        </div>
    </div>

    <!-- Performance Indicator -->
    <div class="performance-indicator">
        <span class="pulse-dot"></span>
        <span id="load-time">Sistema Otimizado Ativo</span>
    </div>
    
    <!-- Cody Avatar -->
    <div class="cody-container">
        <div class="cody-chat" id="codyChat">
            <div id="codyMessage" class="cody-message">
                Ol√°! Sou o Cody, seu companheiro de aprendizagem de IA! ü§ñ Pronto para explorar o mundo da IA juntos?
            </div>
            <div class="cody-options" id="codyOptions">
                <button class="cody-option" data-cody-topic="course">Conte-me sobre o curso</button>
                <button class="cody-option" data-cody-topic="progress">Como acompanho o progresso?</button>
                <button class="cody-option" data-cody-topic="tips">D√™-me dicas de aprendizado</button>
            </div>
        </div>
        <div class="cody-avatar" data-cody-toggle>
            <div class="cody-face" id="codyFace">ü§ñ</div>
        </div>
    </div>
    
    <!-- Cody Notification -->
    <div class="cody-notification" id="codyNotification">
        <div id="notificationText"></div>
    </div>
    
    <!-- Learning Interface -->
    <div class="learning-container" id="learningContainer">
        <div class="learning-header">
            <button class="close-learning" data-close-learning>&times;</button>
            <h1 id="learningTitle">T√≠tulo do M√≥dulo</h1>
            <p id="learningSubtitle">Subt√≠tulo da li√ß√£o</p>
        </div>
        <div class="lesson-content">
            <div class="lesson-nav">
                <button class="btn-nav btn-back" id="prevBtn" data-lesson-prev>‚Üê Anterior</button>
                <div class="lesson-progress">
                    <div style="text-align: center; margin-bottom: 8px; font-size: 0.9em; color: #666;">
                        Progresso: <span id="lessonCounter">1 de 5</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="lessonProgress" style="width: 20%"></div>
                    </div>
                </div>
                <button class="btn-nav btn-next" id="nextBtn" data-lesson-next>Pr√≥ximo ‚Üí</button>
            </div>
            
            <div id="lessonContentArea">
                <!-- Lesson content will be dynamically loaded here -->
            </div>
            
            <div class="lesson-actions">
                <button class="btn btn-secondary" onclick="closeLearningInterface()">Voltar ao Curso</button>
                <div id="lessonXP" style="color: #666; font-weight: 600;"></div>
            </div>
        </div>
    </div>
    
    <!-- Modal for lesson details -->
    <div id="lessonModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <div id="modalContent">
                <!-- Modal content will be populated by JavaScript -->
            </div>
        </div>
    </div>
    
    <script>
        console.log("Cody Verse initialized successfully");
        
        let courseModules = [];
        
        // Load course data from API
        async function loadCourseData() {
            try {
                const response = await fetch('/api/courses');
                const result = await response.json();
                
                if (result.success) {
                    courseModules = await Promise.all(result.data.map(async (module) => {
                        // Load lessons for each module
                        try {
                            const lessonsResponse = await fetch(`/api/courses/${module.id}/lessons`);
                            const lessonsResult = await lessonsResponse.json();
                            
                            return {
                                id: module.id,
                                title: module.title,
                                description: module.description,
                                difficulty: module.difficulty,
                                duration: module.duration,
                                xp: module.totalXP + ' XP',
                                lessons: lessonsResult.success ? lessonsResult.data.map(lesson => ({
                                    id: lesson.id,
                                    title: lesson.title,
                                    type: lesson.type,
                                    duration: lesson.duration,
                                    xp: lesson.xpReward + ' XP',
                                    content: lesson.content
                                })) : []
                            };
                        } catch (lessonError) {
                            console.warn('Failed to load lessons for module', module.id);
                            return {
                                id: module.id,
                                title: module.title,
                                description: module.description,
                                difficulty: module.difficulty,
                                duration: module.duration,
                                xp: module.totalXP + ' XP',
                                lessons: []
                            };
                        }
                    }));
                    
                    renderCourseModules();
                    console.log('Course data loaded successfully from database');
                } else {
                    console.error('Failed to load courses:', result.error);
                    throw new Error(result.error);
                }
            } catch (error) {
                console.error('Error loading course data:', error);
                // Use static fallback data if database fails
                if (courseModules.length === 0) {
                    courseModules = staticCourseModules;
                    renderCourseModules();
                    console.warn('Using static fallback data due to API failure');
                }
            }
        }
        
        // Static fallback data (will be replaced by API data)
        const staticCourseModules = [
            {
                id: 1,
                title: 'IA B√°sica',
                description: 'Conceitos fundamentais de intelig√™ncia artificial, machine learning e redes neurais. Inicie sua jornada no mundo da IA.',
                difficulty: 'beginner',
                duration: '45 min',
                xp: '30 XP',
                lessons: [
                    { title: 'O que √© Intelig√™ncia Artificial?', type: 'theory', duration: '12 min', xp: '5 XP' },
                    { title: 'Fundamentos de Machine Learning', type: 'interactive', duration: '15 min', xp: '8 XP' },
                    { title: 'Redes Neurais Explicadas', type: 'interactive', duration: '18 min', xp: '8 XP' },
                    { title: '√âtica em IA', type: 'theory', duration: '10 min', xp: '5 XP' },
                    { title: 'Avalia√ß√£o IA B√°sica', type: 'quiz', duration: '8 min', xp: '15 XP' }
                ]
            },
            {
                id: 2,
                title: 'Prompt Engineering',
                description: 'Domine a arte de criar prompts eficazes para obter respostas ideais da IA. Aprenda t√©cnicas avan√ßadas usadas por profissionais.',
                difficulty: 'beginner',
                duration: '60 min',
                xp: '35 XP',
                lessons: [
                    { title: 'Introdu√ß√£o ao Prompt Engineering', type: 'interactive', duration: '15 min', xp: '8 XP' },
                    { title: 'Estrutura e T√©cnicas de Prompt', type: 'interactive', duration: '20 min', xp: '10 XP' },
                    { title: 'Estrat√©gias Avan√ßadas', type: 'interactive', duration: '25 min', xp: '12 XP' },
                    { title: 'Otimiza√ß√£o e Testes', type: 'lab', duration: '30 min', xp: '15 XP' },
                    { title: 'Avalia√ß√£o Prompt Engineering', type: 'quiz', duration: '12 min', xp: '20 XP' }
                ]
            },
            {
                id: 3,
                title: 'Assistentes de IA',
                description: 'Compreenda e construa assistentes de IA inteligentes para v√°rias aplica√ß√µes. Do design ao deployment de sistemas de produ√ß√£o.',
                difficulty: 'intermediate',
                duration: '75 min',
                xp: '40 XP',
                lessons: [
                    { title: 'Entendendo Assistentes de IA', type: 'theory', duration: '18 min', xp: '8 XP' },
                    { title: 'Design de Personalidades', type: 'interactive', duration: '22 min', xp: '10 XP' },
                    { title: 'Treinamento e Fine-tuning', type: 'lab', duration: '35 min', xp: '15 XP' },
                    { title: 'Assistentes em Produ√ß√£o', type: 'lab', duration: '40 min', xp: '18 XP' },
                    { title: 'Projeto Pr√°tico', type: 'lab', duration: '45 min', xp: '25 XP' }
                ]
            },
            {
                id: 4,
                title: 'Agentes de IA',
                description: 'Agentes de IA aut√¥nomos avan√ßados com tomada de decis√£o e comportamento orientado a objetivos. Construa sistemas multi-agente sofisticados.',
                difficulty: 'intermediate',
                duration: '90 min',
                xp: '50 XP',
                lessons: [
                    { title: 'De Assistentes a Agentes Aut√¥nomos', type: 'theory', duration: '20 min', xp: '10 XP' },
                    { title: 'Comportamento Orientado a Objetivos', type: 'interactive', duration: '25 min', xp: '12 XP' },
                    { title: 'Sistemas Multi-Agente', type: 'interactive', duration: '30 min', xp: '15 XP' },
                    { title: 'Frameworks de Desenvolvimento', type: 'lab', duration: '40 min', xp: '18 XP' },
                    { title: 'Deploy Avan√ßado de Agentes', type: 'lab', duration: '35 min', xp: '20 XP' },
                    { title: 'Projeto Final Agentes', type: 'lab', duration: '60 min', xp: '30 XP' }
                ]
            },
            {
                id: 5,
                title: 'Model Context Protocol',
                description: 'Implementa√ß√£o profissional do MCP para integra√ß√£o de sistemas de IA empresariais. Domine o protocolo que impulsiona aplica√ß√µes de IA modernas.',
                difficulty: 'advanced',
                duration: '120 min',
                xp: '60 XP',
                lessons: [
                    { title: 'Introdu√ß√£o ao Model Context Protocol', type: 'theory', duration: '25 min', xp: '12 XP' },
                    { title: 'Desenvolvimento de Servidor MCP', type: 'lab', duration: '45 min', xp: '18 XP' },
                    { title: 'Integra√ß√£o de Cliente MCP', type: 'lab', duration: '40 min', xp: '18 XP' },
                    { title: 'Padr√µes Avan√ßados MCP', type: 'lab', duration: '50 min', xp: '22 XP' },
                    { title: 'Deploy em Produ√ß√£o MCP', type: 'lab', duration: '55 min', xp: '25 XP' },
                    { title: 'Certifica√ß√£o Profissional MCP', type: 'quiz', duration: '90 min', xp: '40 XP' }
                ]
            }
        ];
        
        let codyState = {
            isOpen: false,
            currentContext: 'welcome',
            userProgress: 0,
            lastInteraction: Date.now()
        };
        
        let currentLearningState = {
            moduleId: null,
            lessonIndex: 0,
            totalLessons: 0,
            earnedXP: 0
        };
        
        const codyResponses = {
            course: [
                "Nosso curso √© projetado como uma jornada escal√°vel! Come√ßamos com IA B√°sica para construir sua base, depois passamos por Prompt Engineering, Assistentes de IA, Agentes de IA e finalmente dominamos o Model Context Protocol.",
                "√â como aprender a dirigir - primeiro voc√™ aprende o b√°sico, depois t√©cnicas avan√ßadas e finalmente habilidades profissionais. Cada m√≥dulo se baseia no anterior!",
                "O curso tem 27 li√ß√µes no total, com mais de 390 minutos de conte√∫do e 215 pontos XP para ganhar. Voc√™ passar√° do n√≠vel iniciante ao profissional!"
            ],
            progress: [
                "Seu progresso √© acompanhado atrav√©s de pontos XP, li√ß√µes conclu√≠das e conquistas! Cada li√ß√£o d√° pontos de experi√™ncia baseados na dificuldade.",
                "Vou mostrar um anel de progresso ao redor do meu avatar - ele se preenche conforme voc√™ completa m√≥dulos. Al√©m disso, voc√™ desbloquear√° badges e certificados!",
                "N√£o se preocupe em ir muito r√°pido - vou me adaptar ao seu ritmo de aprendizado e dar dicas quando precisar."
            ],
            tips: [
                "Aqui est√° minha principal dica de aprendizado: Pratique o que aprender imediatamente! Cada li√ß√£o interativa tem exerc√≠cios pr√°ticos.",
                "Tente explicar conceitos de volta para mim - ensinar √© a melhor forma de aprender. Vou ouvir e dar feedback!",
                "Fa√ßa pausas entre m√≥dulos. Conceitos de IA precisam de tempo para sedimentar. Vou enviar lembretes gentis para continuar!"
            ]
        };
        
        const lessonContent = {
            1: {
                0: {
                    type: 'theory',
                    title: 'O que √© Intelig√™ncia Artificial?',
                    content: `
                        <h2>Fundamentos da Intelig√™ncia Artificial</h2>
                        <p>A Intelig√™ncia Artificial (IA) representa um dos avan√ßos tecnol√≥gicos mais significativos da era moderna, transformando como interagimos com m√°quinas e processamos informa√ß√µes.</p>
                        
                        <h3>Defini√ß√£o e Escopo</h3>
                        <p>IA √© a capacidade de sistemas computacionais executarem tarefas que tradicionalmente requerem intelig√™ncia humana, incluindo:</p>
                        <ul>
                            <li><strong>Reconhecimento de Padr√µes:</strong> Identificar tend√™ncias em dados complexos</li>
                            <li><strong>Tomada de Decis√µes:</strong> Avaliar op√ß√µes e escolher a√ß√µes otimizadas</li>
                            <li><strong>Processamento de Linguagem:</strong> Compreender e gerar comunica√ß√£o humana</li>
                            <li><strong>Aprendizado Adaptativo:</strong> Melhorar performance atrav√©s da experi√™ncia</li>
                        </ul>
                        
                        <h3>Categorias de IA</h3>
                        <div class="info-grid">
                            <div class="info-card">
                                <h4>IA Estreita (ANI)</h4>
                                <p>Especializada em tarefas espec√≠ficas como recomenda√ß√µes de produtos ou diagn√≥stico m√©dico.</p>
                            </div>
                            <div class="info-card">
                                <h4>IA Geral (AGI)</h4>
                                <p>Capacidade cognitiva equivalente ao ser humano em todas as √°reas - ainda em desenvolvimento.</p>
                            </div>
                            <div class="info-card">
                                <h4>Super IA (ASI)</h4>
                                <p>Intelig√™ncia que supera capacidades humanas - conceito te√≥rico futuro.</p>
                            </div>
                        </div>
                        
                        <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 8px; margin: 20px 0;">
                            <h4>üöÄ Aplica√ß√µes Reais</h4>
                            <p><strong>Netflix:</strong> Usa IA para recomendar conte√∫do personalizado analisando seu hist√≥rico de visualiza√ß√£o e padr√µes de comportamento.</p>
                            <p><strong>Tesla:</strong> Sistemas de condu√ß√£o aut√¥noma processam dados de sensores em tempo real para navega√ß√£o segura.</p>
                            <p><strong>ChatGPT:</strong> Modelos de linguagem geram respostas contextuais atrav√©s de redes neurais treinadas em trilh√µes de palavras.</p>
                        </div>
                        
                        <div class="interactive-demo">
                            <h4>üî¨ Demonstra√ß√£o Interativa</h4>
                            <p>Clique nos bot√µes abaixo para ver como diferentes tipos de IA funcionam:</p>
                            <button onclick="showAIExample('classification')" class="demo-btn">Classifica√ß√£o de Imagens</button>
                            <button onclick="showAIExample('prediction')" class="demo-btn">Predi√ß√£o de Dados</button>
                            <button onclick="showAIExample('nlp')" class="demo-btn">Processamento de Texto</button>
                            <div id="aiDemoResult" class="demo-result"></div>
                        </div>
                    `
                },
                1: {
                    type: 'interactive',
                    title: 'Fundamentos de Machine Learning',
                    content: `
                        <h2>Explorando Machine Learning na Pr√°tica</h2>
                        <p>Machine Learning √© o n√∫cleo da IA moderna. Vamos explorar os tr√™s paradigmas principais atrav√©s de simula√ß√µes interativas.</p>
                        
                        <div class="ml-simulator">
                            <h3>Simulador de Tipos de ML</h3>
                            <div class="ml-tabs">
                                <button class="ml-tab active" onclick="switchMLType('supervised')">Aprendizado Supervisionado</button>
                                <button class="ml-tab" onclick="switchMLType('unsupervised')">Aprendizado N√£o-Supervisionado</button>
                                <button class="ml-tab" onclick="switchMLType('reinforcement')">Aprendizado por Refor√ßo</button>
                            </div>
                            
                            <div id="supervised" class="ml-content active">
                                <h4>Aprendizado Supervisionado</h4>
                                <p>O algoritmo aprende com exemplos rotulados para fazer predi√ß√µes.</p>
                                <div class="ml-example">
                                    <h5>Exemplo: Classifica√ß√£o de E-mails</h5>
                                    <div class="email-classifier">
                                        <div class="training-data">
                                            <p><strong>Dados de Treino:</strong></p>
                                            <div class="email-sample spam">üìß "Ganhe dinheiro r√°pido!" ‚Üí SPAM</div>
                                            <div class="email-sample normal">üìß "Reuni√£o √†s 14h" ‚Üí NORMAL</div>
                                            <div class="email-sample spam">üìß "Clique aqui para pr√™mio!" ‚Üí SPAM</div>
                                        </div>
                                        <button onclick="classifyEmail()" class="test-btn">Testar Nova Classifica√ß√£o</button>
                                        <div id="emailResult" class="classification-result"></div>
                                    </div>
                                </div>
                            </div>
                            
                            <div id="unsupervised" class="ml-content">
                                <h4>Aprendizado N√£o-Supervisionado</h4>
                                <p>O algoritmo encontra padr√µes ocultos em dados sem r√≥tulos.</p>
                                <div class="clustering-demo">
                                    <h5>Exemplo: Segmenta√ß√£o de Clientes</h5>
                                    <p>Agrupar clientes por comportamento de compra similar.</p>
                                    <button onclick="runClustering()" class="cluster-btn">Executar Clustering</button>
                                    <div id="clusterResult" class="cluster-visualization"></div>
                                </div>
                            </div>
                            
                            <div id="reinforcement" class="ml-content">
                                <h4>Aprendizado por Refor√ßo</h4>
                                <p>O agente aprende atrav√©s de tentativa e erro, recebendo recompensas.</p>
                                <div class="rl-game">
                                    <h5>Jogo: Navega√ß√£o Inteligente</h5>
                                    <p>Ajude o agente a encontrar o tesouro evitando obst√°culos.</p>
                                    <div class="game-grid" id="rlGrid"></div>
                                    <button onclick="startRLTraining()" class="train-btn">Iniciar Treinamento</button>
                                    <div id="rlProgress" class="training-progress"></div>
                                </div>
                            </div>
                        </div>
                    `
                },
                2: {
                    type: 'interactive',
                    title: 'Redes Neurais Explicadas',
                    content: `
                        <h2>Arquitetura de Redes Neurais</h2>
                        <p>Redes neurais s√£o inspiradas no funcionamento do c√©rebro humano. Vamos construir e treinar uma rede neural interativa.</p>
                        
                        <div class="neural-network-builder">
                            <h3>Construtor de Rede Neural</h3>
                            <div class="network-config">
                                <div class="config-section">
                                    <label>Neur√¥nios na Camada de Entrada:</label>
                                    <input type="range" id="inputNeurons" min="2" max="8" value="3" onchange="updateNetwork()">
                                    <span id="inputCount">3</span>
                                </div>
                                <div class="config-section">
                                    <label>Neur√¥nios na Camada Oculta:</label>
                                    <input type="range" id="hiddenNeurons" min="2" max="10" value="4" onchange="updateNetwork()">
                                    <span id="hiddenCount">4</span>
                                </div>
                                <div class="config-section">
                                    <label>Neur√¥nios na Camada de Sa√≠da:</label>
                                    <input type="range" id="outputNeurons" min="1" max="5" value="2" onchange="updateNetwork()">
                                    <span id="outputCount">2</span>
                                </div>
                            </div>
                            
                            <div class="network-visualization" id="networkViz">
                                <!-- Visualiza√ß√£o da rede ser√° gerada aqui -->
                            </div>
                            
                            <div class="activation-functions">
                                <h4>Fun√ß√µes de Ativa√ß√£o</h4>
                                <select id="activationFunction" onchange="updateActivation()">
                                    <option value="relu">ReLU (Rectified Linear Unit)</option>
                                    <option value="sigmoid">Sigmoid</option>
                                    <option value="tanh">Tanh</option>
                                    <option value="softmax">Softmax</option>
                                </select>
                                <div id="activationGraph" class="function-graph"></div>
                            </div>
                            
                            <div class="training-simulation">
                                <h4>Simula√ß√£o de Treinamento</h4>
                                <div class="training-controls">
                                    <button onclick="startTraining()" class="train-btn">Iniciar Treinamento</button>
                                    <button onclick="stopTraining()" class="stop-btn">Parar</button>
                                    <button onclick="resetNetwork()" class="reset-btn">Resetar</button>
                                </div>
                                <div class="training-metrics">
                                    <div class="metric">
                                        <label>√âpoca:</label>
                                        <span id="epoch">0</span>
                                    </div>
                                    <div class="metric">
                                        <label>Perda:</label>
                                        <span id="loss">--</span>
                                    </div>
                                    <div class="metric">
                                        <label>Precis√£o:</label>
                                        <span id="accuracy">--</span>
                                    </div>
                                </div>
                                <div id="lossChart" class="chart"></div>
                            </div>
                        </div>
                    `
                },
                3: {
                    type: 'theory',
                    title: '√âtica em IA e Desenvolvimento Respons√°vel',
                    content: `
                        <h2>√âtica e Responsabilidade na IA</h2>
                        <p>Com o poder da IA vem a responsabilidade de desenvolver e implementar sistemas que beneficiem a humanidade de forma justa e segura.</p>
                        
                        <h3>Princ√≠pios Fundamentais da IA √âtica</h3>
                        <div class="ethics-principles">
                            <div class="principle-card">
                                <h4>üéØ Transpar√™ncia</h4>
                                <p>Sistemas de IA devem ser compreens√≠veis e audit√°veis. Usu√°rios t√™m direito de entender como decis√µes s√£o tomadas.</p>
                                <div class="example">
                                    <strong>Exemplo:</strong> Bancos devem explicar por que um empr√©stimo foi negado por algoritmos de IA.
                                </div>
                            </div>
                            
                            <div class="principle-card">
                                <h4>‚öñÔ∏è Justi√ßa e N√£o-Discrimina√ß√£o</h4>
                                <p>IA deve tratar todos os grupos de forma equitativa, evitando vieses discriminat√≥rios.</p>
                                <div class="example">
                                    <strong>Exemplo:</strong> Algoritmos de contrata√ß√£o n√£o devem discriminar por g√™nero, ra√ßa ou idade.
                                </div>
                            </div>
                            
                            <div class="principle-card">
                                <h4>üîí Privacidade e Seguran√ßa</h4>
                                <p>Dados pessoais devem ser protegidos e usados apenas para prop√≥sitos leg√≠timos.</p>
                                <div class="example">
                                    <strong>Exemplo:</strong> Assistentes virtuais devem criptografar conversas e limitar acesso a dados sens√≠veis.
                                </div>
                            </div>
                            
                            <div class="principle-card">
                                <h4>üë• Responsabilidade Humana</h4>
                                <p>Humanos devem manter controle e responsabilidade final sobre sistemas de IA.</p>
                                <div class="example">
                                    <strong>Exemplo:</strong> Carros aut√¥nomos devem permitir interven√ß√£o humana em situa√ß√µes cr√≠ticas.
                                </div>
                            </div>
                        </div>
                        
                        <h3>Casos de Estudo: Dilemas √âticos</h3>
                        <div class="case-studies">
                            <div class="case-study">
                                <h4>Caso 1: IA em Recrutamento</h4>
                                <p><strong>Situa√ß√£o:</strong> Uma empresa usa IA para filtrar curr√≠culos automaticamente.</p>
                                <p><strong>Dilema:</strong> O algoritmo foi treinado com dados hist√≥ricos que refletem vieses de contrata√ß√£o passados.</p>
                                <button onclick="showEthicalSolution(1)" class="solution-btn">Ver Solu√ß√£o √âtica</button>
                                <div id="solution1" class="ethical-solution" style="display: none;">
                                    <p><strong>Solu√ß√£o:</strong> Auditar regularmente o algoritmo, diversificar dados de treinamento, implementar m√©tricas de justi√ßa e manter supervis√£o humana nas decis√µes finais.</p>
                                </div>
                            </div>
                            
                            <div class="case-study">
                                <h4>Caso 2: IA em Sa√∫de</h4>
                                <p><strong>Situa√ß√£o:</strong> Sistema de IA diagnostica doen√ßas com 95% de precis√£o.</p>
                                <p><strong>Dilema:</strong> Como equilibrar efici√™ncia da IA com responsabilidade m√©dica humana?</p>
                                <button onclick="showEthicalSolution(2)" class="solution-btn">Ver Solu√ß√£o √âtica</button>
                                <div id="solution2" class="ethical-solution" style="display: none;">
                                    <p><strong>Solu√ß√£o:</strong> IA como ferramenta de apoio, n√£o substitui√ß√£o. M√©dicos devem validar diagn√≥sticos, pacientes devem ser informados sobre uso de IA, e sistemas devem ser transparentes sobre limita√ß√µes.</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="ethical-framework">
                            <h3>Framework de Desenvolvimento √âtico</h3>
                            <ol>
                                <li><strong>Avalia√ß√£o de Impacto:</strong> Analisar poss√≠veis consequ√™ncias sociais</li>
                                <li><strong>Design Inclusivo:</strong> Incluir perspectivas diversas no desenvolvimento</li>
                                <li><strong>Teste de Vi√©s:</strong> Verificar discrimina√ß√£o em diferentes grupos</li>
                                <li><strong>Monitoramento Cont√≠nuo:</strong> Acompanhar performance e impacto p√≥s-deployment</li>
                                <li><strong>Transpar√™ncia:</strong> Documentar decis√µes e limita√ß√µes do sistema</li>
                            </ol>
                        </div>
                    `
                },
                4: {
                    type: 'quiz',
                    title: 'Avalia√ß√£o: IA B√°sica',
                    content: `
                        <h2>Avalia√ß√£o Abrangente de IA B√°sica</h2>
                        <p>Teste seus conhecimentos sobre os fundamentos da Intelig√™ncia Artificial.</p>
                        
                        <div class="quiz-container">
                            <div class="question-counter">
                                <span id="currentQuestion">1</span> de <span id="totalQuestions">5</span>
                            </div>
                            
                            <div class="quiz-question" id="question1">
                                <h3>Quest√£o 1: Defini√ß√£o de IA</h3>
                                <p>O que melhor define a Intelig√™ncia Artificial moderna?</p>
                                <div class="quiz-options">
                                    <div class="quiz-option" data-answer="incorrect">Programas que executam comandos pr√©-definidos rapidamente</div>
                                    <div class="quiz-option" data-answer="correct">Sistemas que podem aprender, adaptar-se e realizar tarefas cognitivas</div>
                                    <div class="quiz-option" data-answer="incorrect">Qualquer software que processa grandes volumes de dados</div>
                                    <div class="quiz-option" data-answer="incorrect">Rob√¥s f√≠sicos que imitam movimentos humanos</div>
                                </div>
                            </div>
                            
                            <div class="quiz-question" id="question2" style="display: none;">
                                <h3>Quest√£o 2: Machine Learning</h3>
                                <p>No aprendizado supervisionado, qual √© o papel dos dados rotulados?</p>
                                <div class="quiz-options">
                                    <div class="quiz-option" data-answer="incorrect">Acelerar o processamento dos algoritmos</div>
                                    <div class="quiz-option" data-answer="correct">Ensinar o algoritmo a reconhecer padr√µes e fazer predi√ß√µes</div>
                                    <div class="quiz-option" data-answer="incorrect">Reduzir o consumo de mem√≥ria durante o treinamento</div>
                                    <div class="quiz-option" data-answer="incorrect">Organizar os dados em categorias para armazenamento</div>
                                </div>
                            </div>
                            
                            <div class="quiz-question" id="question3" style="display: none;">
                                <h3>Quest√£o 3: Redes Neurais</h3>
                                <p>Qual fun√ß√£o das redes neurais artificiais √© inspirada no c√©rebro humano?</p>
                                <div class="quiz-options">
                                    <div class="quiz-option" data-answer="incorrect">Armazenar dados em estruturas hier√°rquicas</div>
                                    <div class="quiz-option" data-answer="correct">Processar informa√ß√µes atrav√©s de conex√µes ponderadas entre neur√¥nios</div>
                                    <div class="quiz-option" data-answer="incorrect">Executar c√°lculos matem√°ticos em paralelo</div>
                                    <div class="quiz-option" data-answer="incorrect">Comprimir informa√ß√µes para economizar espa√ßo</div>
                                </div>
                            </div>
                            
                            <div class="quiz-question" id="question4" style="display: none;">
                                <h3>Quest√£o 4: √âtica em IA</h3>
                                <p>Por que a transpar√™ncia √© crucial em sistemas de IA?</p>
                                <div class="quiz-options">
                                    <div class="quiz-option" data-answer="incorrect">Para aumentar a velocidade de processamento</div>
                                    <div class="quiz-option" data-answer="incorrect">Para reduzir custos de desenvolvimento</div>
                                    <div class="quiz-option" data-answer="correct">Para permitir auditoria, accountability e confian√ßa dos usu√°rios</div>
                                    <div class="quiz-option" data-answer="incorrect">Para facilitar a manuten√ß√£o do c√≥digo</div>
                                </div>
                            </div>
                            
                            <div class="quiz-question" id="question5" style="display: none;">
                                <h3>Quest√£o 5: Aplica√ß√µes Pr√°ticas</h3>
                                <p>Qual exemplo melhor demonstra IA Estreita (ANI) em uso atual?</p>
                                <div class="quiz-options">
                                    <div class="quiz-option" data-answer="incorrect">Um rob√¥ que pode realizar qualquer tarefa humana</div>
                                    <div class="quiz-option" data-answer="correct">Sistema de recomenda√ß√£o do Netflix que sugere filmes</div>
                                    <div class="quiz-option" data-answer="incorrect">IA que compreende todas as √°reas do conhecimento humano</div>
                                    <div class="quiz-option" data-answer="incorrect">Computador que passa no teste de Turing em todos os t√≥picos</div>
                                </div>
                            </div>
                            
                            <div class="quiz-results" id="quizResults" style="display: none;">
                                <h3>Resultados da Avalia√ß√£o</h3>
                                <div class="score-display">
                                    <div class="score-circle">
                                        <span id="finalScore">0</span>%
                                    </div>
                                </div>
                                <div id="scoreMessage"></div>
                                <div class="quiz-breakdown" id="quizBreakdown"></div>
                                <button onclick="restartQuiz()" class="restart-btn">Refazer Avalia√ß√£o</button>
                            </div>
                            
                            <div class="quiz-navigation">
                                <button id="prevQuestion" onclick="previousQuestion()" style="display: none;">Anterior</button>
                                <button id="nextQuestion" onclick="nextQuestion()">Pr√≥xima</button>
                                <button id="submitQuiz" onclick="submitQuiz()" style="display: none;">Finalizar Avalia√ß√£o</button>
                            </div>
                        </div>
                    `
                }
            }
        };
        
        function renderCourseModules() {
            const grid = document.getElementById('courseGrid');
            if (!courseModules || courseModules.length === 0) {
                grid.innerHTML = '<p style="text-align: center; color: #666;">Loading courses...</p>';
                return;
            }
            grid.innerHTML = courseModules.map(module => `
                <div class="module-card ${module.difficulty}" data-module-id="${module.id}">
                    <div class="module-header">
                        <div class="module-icon">${module.id}</div>
                        <h3 class="module-title">${module.title}</h3>
                    </div>
                    <p class="module-description">${module.description}</p>
                    <div class="module-meta">
                        <span class="difficulty-badge">${module.difficulty}</span>
                        <div class="module-stats">
                            <div class="stat-item">
                                <span>‚è±Ô∏è</span>
                                <span>${module.duration}</span>
                            </div>
                            <div class="stat-item">
                                <span>‚≠ê</span>
                                <span>${module.xp}</span>
                            </div>
                            <div class="stat-item">
                                <span>üìö</span>
                                <span>${module.lessons.length} li√ß√µes</span>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
            
            // Add event listeners after rendering
            const moduleCards = document.querySelectorAll('.module-card');
            moduleCards.forEach(card => {
                card.addEventListener('click', function() {
                    const moduleId = parseInt(this.getAttribute('data-module-id'));
                    console.log('Module clicked:', moduleId);
                    showModuleDetails(moduleId);
                });
            });
        }
        
        function showModuleDetails(moduleId) {
            const module = courseModules.find(m => m.id === moduleId);
            if (!module) {
                console.error('Module not found:', moduleId);
                return;
            }
            const modalContent = document.getElementById('modalContent');
            
            modalContent.innerHTML = `
                <h2>${module.title}</h2>
                <p style="color: #666; margin: 15px 0;">${module.description}</p>
                <div style="display: flex; gap: 15px; margin: 20px 0;">
                    <span class="difficulty-badge ${module.difficulty}">${module.difficulty}</span>
                    <span>‚è±Ô∏è ${module.duration}</span>
                    <span>‚≠ê ${module.xp}</span>
                </div>
                <div class="lessons-list">
                    <h3>Li√ß√µes do Curso</h3>
                    ${module.lessons && module.lessons.length > 0 ? module.lessons.map((lesson, index) => `
                        <div class="lesson-item" data-module-id="${moduleId}" data-lesson-index="${index}">
                            <div>
                                <strong>${lesson.title}</strong>
                                <span class="lesson-type-badge type-${lesson.type}">${lesson.type}</span>
                            </div>
                            <div style="text-align: right; font-size: 0.9em; color: #666;">
                                <div>${lesson.duration}</div>
                                <div>${lesson.xp}</div>
                            </div>
                        </div>
                    `).join('') : '<p>Li√ß√µes em breve...</p>'}
                </div>
                <div style="margin-top: 30px; text-align: center;">
                    <button class="btn btn-primary" data-module-start="${moduleId}">Iniciar M√≥dulo</button>
                </div>
            `;
            
            document.getElementById('lessonModal').style.display = 'block';
            
            // Add event listeners for lesson items and start button
            const lessonItems = document.querySelectorAll('.lesson-item');
            lessonItems.forEach(item => {
                item.addEventListener('click', function() {
                    const moduleId = parseInt(this.getAttribute('data-module-id'));
                    const lessonIndex = parseInt(this.getAttribute('data-lesson-index'));
                    console.log('Lesson clicked:', moduleId, lessonIndex);
                    startLesson(moduleId, lessonIndex);
                });
            });
            
            const startButton = document.querySelector('[data-module-start]');
            if (startButton) {
                startButton.addEventListener('click', function() {
                    const moduleId = parseInt(this.getAttribute('data-module-start'));
                    console.log('Start module clicked:', moduleId);
                    startModule(moduleId);
                });
            }
        }
        
        function closeModal() {
            document.getElementById('lessonModal').style.display = 'none';
        }
        
        function startModule(moduleId) {
            closeModal();
            showLearningInterface(moduleId, 0);
        }
        
        function startLesson(moduleId, lessonIndex) {
            closeModal();
            showLearningInterface(moduleId, lessonIndex);
        }
        
        function showLearningInterface(moduleId, lessonIndex) {
            const module = courseModules.find(m => m.id === moduleId);
            console.log('Starting learning interface for module:', moduleId, 'lesson:', lessonIndex);
            
            if (!module) {
                console.error('Module not found:', moduleId);
                showNotification('M√≥dulo n√£o encontrado.');
                return;
            }

            if (!module.lessons || module.lessons.length === 0) {
                showNotification('Este m√≥dulo ainda n√£o possui li√ß√µes dispon√≠veis.');
                return;
            }

            currentLearningState = {
                moduleId: moduleId,
                lessonIndex: lessonIndex,
                totalLessons: module.lessons.length,
                earnedXP: 0
            };

            const lesson = module.lessons[lessonIndex];
            const container = document.getElementById('learningContainer');
            console.log('Current lesson:', lesson);
            
            document.getElementById('learningTitle').textContent = module.title;
            document.getElementById('learningSubtitle').textContent = lesson.title;
            
            updateLessonNavigation();
            loadLessonContent(moduleId, lessonIndex);
            
            container.style.display = 'block';
            document.body.style.overflow = 'hidden';
            
            setTimeout(() => {
                showNotification(`Cody: Come√ßando "${lesson.title}"! Estou aqui para ajudar.`);
            }, 1000);
        }

        function loadLessonContent(moduleId, lessonIndex) {
            const module = courseModules.find(m => m.id === moduleId);
            const lesson = module.lessons[lessonIndex];
            const contentArea = document.getElementById('lessonContentArea');
            
            const content = lessonContent[moduleId] && lessonContent[moduleId][lessonIndex] ? 
                lessonContent[moduleId][lessonIndex] : {
                    type: lesson.type,
                    title: lesson.title,
                    content: createDefaultContent(lesson)
                };
            
            const badge = `<span class="lesson-type-badge type-${content.type}">${content.type.toUpperCase()}</span>`;
            contentArea.innerHTML = badge + content.content;
            
            document.getElementById('lessonXP').textContent = `XP desta li√ß√£o: ${lesson.xp}`;
            
            if (content.type === 'quiz') {
                initializeQuiz();
            }
        }

        function createDefaultContent(lesson) {
            // Use real lesson content from database when available
            if (lesson.content && typeof lesson.content === 'object') {
                switch (lesson.type) {
                    case 'theory':
                        if (lesson.content.sections) {
                            return `
                                <h2>${lesson.title}</h2>
                                ${lesson.content.sections.map(section => `
                                    <h3>${section.title}</h3>
                                    <p>${section.content}</p>
                                    ${section.examples ? `
                                        <h4>Exemplos:</h4>
                                        <ul>${section.examples.map(ex => `<li>${ex}</li>`).join('')}</ul>
                                    ` : ''}
                                    ${section.key_concepts ? `
                                        <h4>Conceitos-chave:</h4>
                                        <ul>${section.key_concepts.map(concept => `<li>${concept}</li>`).join('')}</ul>
                                    ` : ''}
                                `).join('')}
                            `;
                        }
                        break;
                    case 'interactive':
                        if (lesson.content.activities) {
                            return `
                                <h2>${lesson.title}</h2>
                                ${lesson.content.activities.map(activity => `
                                    <div class="interactive-activity">
                                        <h3>${activity.title}</h3>
                                        <p>${activity.content}</p>
                                        <button onclick="startActivity('${activity.type}')" class="demo-btn">Iniciar Atividade</button>
                                    </div>
                                `).join('')}
                            `;
                        }
                        break;
                    case 'quiz':
                        if (lesson.content.questions) {
                            return `
                                <h2>${lesson.title}</h2>
                                <div class="quiz-container">
                                    <div class="quiz-question">${lesson.content.questions[0].question}</div>
                                    <div class="quiz-options">
                                        ${lesson.content.questions[0].options.map((option, index) => `
                                            <div class="quiz-option" data-answer="${index === lesson.content.questions[0].correct_answer ? 'correct' : 'incorrect'}">${option}</div>
                                        `).join('')}
                                    </div>
                                    <div class="quiz-explanation" style="display: none; margin-top: 15px; padding: 10px; background: #f0f0f0; border-radius: 5px;">
                                        <strong>Explica√ß√£o:</strong> ${lesson.content.questions[0].explanation}
                                    </div>
                                </div>
                            `;
                        }
                        break;
                }
            }
            
            // Fallback to enhanced default content
            switch (lesson.type) {
                case 'theory':
                    return `
                        <h2>${lesson.title}</h2>
                        <p>Este m√≥dulo aborda conceitos fundamentais de ${lesson.title.toLowerCase()}, fornecendo uma base s√≥lida para seu aprendizado em IA.</p>
                        <div class="info-grid">
                            <div class="info-card">
                                <h4>Objetivos de Aprendizado</h4>
                                <ul>
                                    <li>Compreender conceitos te√≥ricos fundamentais</li>
                                    <li>Conectar teoria com aplica√ß√µes pr√°ticas</li>
                                    <li>Preparar base para m√≥dulos avan√ßados</li>
                                </ul>
                            </div>
                            <div class="info-card">
                                <h4>Aplica√ß√µes Pr√°ticas</h4>
                                <p>Estes conceitos s√£o amplamente utilizados em sistemas de IA modernos para resolver problemas do mundo real.</p>
                            </div>
                        </div>
                    `;
                case 'interactive':
                    return `
                        <h2>${lesson.title}</h2>
                        <p>Explore conceitos de IA atrav√©s de simula√ß√µes e exerc√≠cios interativos.</p>
                        <div class="interactive-demo">
                            <h4>üéØ Atividades Interativas</h4>
                            <p>Esta li√ß√£o inclui simula√ß√µes pr√°ticas para consolidar seu aprendizado.</p>
                            <button onclick="showAIExample('classification')" class="demo-btn">Iniciar Demonstra√ß√£o</button>
                        </div>
                    `;
                case 'quiz':
                    return `
                        <h2>${lesson.title}</h2>
                        <p>Avalie seu conhecimento com quest√µes cuidadosamente elaboradas.</p>
                        <div class="quiz-container">
                            <div class="quiz-question">Esta li√ß√£o foca em:</div>
                            <div class="quiz-options">
                                <div class="quiz-option" data-answer="correct">Avaliar compreens√£o dos conceitos apresentados</div>
                                <div class="quiz-option" data-answer="incorrect">Apenas testar memoriza√ß√£o</div>
                                <div class="quiz-option" data-answer="incorrect">Competi√ß√£o entre estudantes</div>
                                <div class="quiz-option" data-answer="incorrect">Classifica√ß√£o de desempenho</div>
                            </div>
                        </div>
                    `;
                default:
                    return `
                        <h2>${lesson.title}</h2>
                        <div class="info-card">
                            <p>Esta li√ß√£o aborda t√≥picos importantes de ${lesson.title.toLowerCase()}. O conte√∫do detalhado ser√° carregado em breve.</p>
                            <p><strong>Dura√ß√£o estimada:</strong> ${lesson.duration}</p>
                            <p><strong>XP a ganhar:</strong> ${lesson.xp}</p>
                        </div>
                    `;
            }
        }

        function startActivity(activityType) {
            switch(activityType) {
                case 'classification_demo':
                    showAIExample('classification');
                    break;
                default:
                    showNotification('Atividade interativa iniciada! Explore os controles dispon√≠veis.');
            }
        }

        function updateLessonNavigation() {
            const lessonIndex = currentLearningState.lessonIndex;
            const totalLessons = currentLearningState.totalLessons;
            
            document.getElementById('lessonCounter').textContent = `${lessonIndex + 1} de ${totalLessons}`;
            
            const progress = ((lessonIndex + 1) / totalLessons) * 100;
            document.getElementById('lessonProgress').style.width = `${progress}%`;
            
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            
            prevBtn.style.display = lessonIndex === 0 ? 'none' : 'block';
            nextBtn.textContent = lessonIndex === totalLessons - 1 ? 'Concluir' : 'Pr√≥ximo ‚Üí';
        }

        // Interactive lesson functions
        function showAIExample(type) {
            const result = document.getElementById('aiDemoResult');
            switch(type) {
                case 'classification':
                    result.innerHTML = `
                        <h4>Classifica√ß√£o de Imagens</h4>
                        <p>Uma rede neural convolucional analisa pixels da imagem:</p>
                        <div style="display: flex; gap: 10px; align-items: center;">
                            <div style="width: 60px; height: 60px; background: #ccc; border-radius: 5px;">üê±</div>
                            <span>‚Üí CNN ‚Üí</span>
                            <div style="background: #e8f5e8; padding: 5px; border-radius: 3px;">95% Gato</div>
                        </div>
                    `;
                    break;
                case 'prediction':
                    result.innerHTML = `
                        <h4>Predi√ß√£o de Dados</h4>
                        <p>Algoritmo de regress√£o prev√™ valores futuros:</p>
                        <div>Vendas hist√≥rica: 100, 120, 115, 140 ‚Üí Predi√ß√£o pr√≥ximo m√™s: <strong>138 unidades</strong></div>
                    `;
                    break;
                case 'nlp':
                    result.innerHTML = `
                        <h4>Processamento de Linguagem Natural</h4>
                        <p>An√°lise de sentimento em tempo real:</p>
                        <div style="background: #d4edda; padding: 10px; border-radius: 5px;">
                            "Este produto √© incr√≠vel!" ‚Üí <strong>Sentimento: Positivo (92%)</strong>
                        </div>
                    `;
                    break;
            }
        }

        function switchMLType(type) {
            // Remove active class from all tabs and content
            document.querySelectorAll('.ml-tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.ml-content').forEach(content => content.classList.remove('active'));
            
            // Add active class to selected tab and content
            event.target.classList.add('active');
            document.getElementById(type).classList.add('active');
        }

        function classifyEmail() {
            const emails = [
                { text: "Promo√ß√£o especial! Clique agora!", result: "SPAM (89% confian√ßa)" },
                { text: "Relat√≥rio mensal em anexo", result: "NORMAL (94% confian√ßa)" },
                { text: "Voc√™ ganhou um pr√™mio!", result: "SPAM (76% confian√ßa)" }
            ];
            const randomEmail = emails[Math.floor(Math.random() * emails.length)];
            
            document.getElementById('emailResult').innerHTML = `
                <div style="background: #f8f9fa; padding: 10px; border-radius: 5px; margin-top: 10px;">
                    <strong>Novo e-mail:</strong> "${randomEmail.text}"<br>
                    <strong>Classifica√ß√£o:</strong> ${randomEmail.result}
                </div>
            `;
        }

        function runClustering() {
            document.getElementById('clusterResult').innerHTML = `
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-top: 15px;">
                    <div style="background: #e3f2fd; padding: 10px; border-radius: 5px;">
                        <strong>Grupo 1: Compradores Frequentes</strong><br>
                        Alta frequ√™ncia, valor m√©dio
                    </div>
                    <div style="background: #fff3e0; padding: 10px; border-radius: 5px;">
                        <strong>Grupo 2: Premium</strong><br>
                        Baixa frequ√™ncia, alto valor
                    </div>
                    <div style="background: #f3e5f5; padding: 10px; border-radius: 5px;">
                        <strong>Grupo 3: Ocasionais</strong><br>
                        Baixa frequ√™ncia e valor
                    </div>
                </div>
            `;
        }

        let rlTraining = false;
        function startRLTraining() {
            if (rlTraining) return;
            rlTraining = true;
            
            const grid = document.getElementById('rlGrid');
            grid.innerHTML = `
                <div style="display: grid; grid-template-columns: repeat(5, 40px); gap: 2px;">
                    <div style="background: #4caf50; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center;">ü§ñ</div>
                    <div style="background: #fff; width: 40px; height: 40px; border: 1px solid #ddd;"></div>
                    <div style="background: #f44336; width: 40px; height: 40px;"></div>
                    <div style="background: #fff; width: 40px; height: 40px; border: 1px solid #ddd;"></div>
                    <div style="background: #fff; width: 40px; height: 40px; border: 1px solid #ddd;"></div>
                    <div style="background: #fff; width: 40px; height: 40px; border: 1px solid #ddd;"></div>
                    <div style="background: #f44336; width: 40px; height: 40px;"></div>
                    <div style="background: #fff; width: 40px; height: 40px; border: 1px solid #ddd;"></div>
                    <div style="background: #fff; width: 40px; height: 40px; border: 1px solid #ddd;"></div>
                    <div style="background: #ffeb3b; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center;">üí∞</div>
                </div>
            `;
            
            let episode = 0;
            const progress = document.getElementById('rlProgress');
            const interval = setInterval(() => {
                episode++;
                progress.innerHTML = `Epis√≥dio ${episode}/50 - Recompensa acumulada: ${Math.floor(Math.random() * 100 + episode * 2)}`;
                
                if (episode >= 50) {
                    clearInterval(interval);
                    progress.innerHTML = `Treinamento conclu√≠do! Agente aprendeu a navegar com 94% de sucesso.`;
                    rlTraining = false;
                }
            }, 100);
        }

        function showEthicalSolution(caseNumber) {
            const solution = document.getElementById(`solution${caseNumber}`);
            solution.style.display = solution.style.display === 'none' ? 'block' : 'none';
        }

        // Advanced quiz functionality
        let currentQuestionIndex = 0;
        let quizAnswers = [];
        let totalQuizQuestions = 5;

        function initializeQuiz() {
            currentQuestionIndex = 0;
            quizAnswers = [];
            document.getElementById('totalQuestions').textContent = totalQuizQuestions;
            updateQuizNavigation();
            
            const options = document.querySelectorAll('.quiz-option');
            options.forEach(option => {
                option.addEventListener('click', function() {
                    const questionDiv = this.closest('.quiz-question');
                    const questionOptions = questionDiv.querySelectorAll('.quiz-option');
                    
                    questionOptions.forEach(opt => opt.classList.remove('selected'));
                    this.classList.add('selected');
                    
                    // Store answer
                    const isCorrect = this.getAttribute('data-answer') === 'correct';
                    quizAnswers[currentQuestionIndex] = isCorrect;
                });
            });
        }

        function nextQuestion() {
            if (currentQuestionIndex < totalQuizQuestions - 1) {
                document.getElementById(`question${currentQuestionIndex + 1}`).style.display = 'none';
                currentQuestionIndex++;
                document.getElementById(`question${currentQuestionIndex + 1}`).style.display = 'block';
                updateQuizNavigation();
            }
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                document.getElementById(`question${currentQuestionIndex + 1}`).style.display = 'none';
                currentQuestionIndex--;
                document.getElementById(`question${currentQuestionIndex + 1}`).style.display = 'block';
                updateQuizNavigation();
            }
        }

        function updateQuizNavigation() {
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            
            const prevBtn = document.getElementById('prevQuestion');
            const nextBtn = document.getElementById('nextQuestion');
            const submitBtn = document.getElementById('submitQuiz');
            
            prevBtn.style.display = currentQuestionIndex === 0 ? 'none' : 'block';
            
            if (currentQuestionIndex === totalQuizQuestions - 1) {
                nextBtn.style.display = 'none';
                submitBtn.style.display = 'block';
            } else {
                nextBtn.style.display = 'block';
                submitBtn.style.display = 'none';
            }
        }

        function submitQuiz() {
            const score = (quizAnswers.filter(answer => answer === true).length / totalQuizQuestions) * 100;
            
            // Hide all questions
            for (let i = 1; i <= totalQuizQuestions; i++) {
                document.getElementById(`question${i}`).style.display = 'none';
            }
            
            // Show results
            const resultsDiv = document.getElementById('quizResults');
            resultsDiv.style.display = 'block';
            
            document.getElementById('finalScore').textContent = Math.round(score);
            
            const scoreMessage = document.getElementById('scoreMessage');
            if (score >= 80) {
                scoreMessage.innerHTML = `<h4 style="color: #28a745;">Excelente! Voc√™ dominou os conceitos de IA b√°sica!</h4>`;
                setTimeout(() => showNotification('Cody: Fant√°stico! Voc√™ est√° pronto para m√≥dulos avan√ßados!'), 1000);
            } else if (score >= 60) {
                scoreMessage.innerHTML = `<h4 style="color: #ffc107;">Bom trabalho! Revise alguns conceitos e tente novamente.</h4>`;
            } else {
                scoreMessage.innerHTML = `<h4 style="color: #dc3545;">Continue estudando! A pr√°tica leva √† perfei√ß√£o.</h4>`;
            }
            
            // Hide navigation
            document.querySelector('.quiz-navigation').style.display = 'none';
        }

        function restartQuiz() {
            currentQuestionIndex = 0;
            quizAnswers = [];
            
            // Show first question, hide others and results
            for (let i = 1; i <= totalQuizQuestions; i++) {
                document.getElementById(`question${i}`).style.display = i === 1 ? 'block' : 'none';
            }
            document.getElementById('quizResults').style.display = 'none';
            document.querySelector('.quiz-navigation').style.display = 'flex';
            
            // Clear selections
            document.querySelectorAll('.quiz-option').forEach(option => {
                option.classList.remove('selected', 'correct', 'incorrect');
            });
            
            updateQuizNavigation();
        }

        function nextLesson() {
            const moduleId = currentLearningState.moduleId;
            const lessonIndex = currentLearningState.lessonIndex;
            const totalLessons = currentLearningState.totalLessons;
            
            if (lessonIndex < totalLessons - 1) {
                currentLearningState.lessonIndex++;
                loadLessonContent(moduleId, currentLearningState.lessonIndex);
                updateLessonNavigation();
            } else {
                completeModule();
            }
        }

        function previousLesson() {
            const moduleId = currentLearningState.moduleId;
            
            if (currentLearningState.lessonIndex > 0) {
                currentLearningState.lessonIndex--;
                loadLessonContent(moduleId, currentLearningState.lessonIndex);
                updateLessonNavigation();
            }
        }

        function completeModule() {
            const module = courseModules.find(m => m.id === currentLearningState.moduleId);
            const totalXP = module.lessons.reduce((sum, lesson) => {
                return sum + parseInt(lesson.xp.replace(' XP', ''));
            }, 0);
            
            const contentArea = document.getElementById('lessonContentArea');
            contentArea.innerHTML = `
                <div class="lesson-complete">
                    <h2>üéâ M√≥dulo Conclu√≠do!</h2>
                    <p>Parab√©ns! Voc√™ completou o m√≥dulo "${module.title}"</p>
                    <div class="xp-earned">+${totalXP} XP</div>
                    <p>Continue sua jornada com o pr√≥ximo m√≥dulo!</p>
                </div>
            `;
            
            document.getElementById('nextBtn').style.display = 'none';
            
            setTimeout(() => {
                showNotification(`Cody: Fant√°stico! Voc√™ dominou ${module.title}! Pronto para o pr√≥ximo desafio? üöÄ`);
            }, 1000);
        }

        function closeLearningInterface() {
            document.getElementById('learningContainer').style.display = 'none';
            document.body.style.overflow = 'auto';
            
            currentLearningState = {
                moduleId: null,
                lessonIndex: 0,
                totalLessons: 0,
                earnedXP: 0
            };
        }
        
        function toggleCody() {
            const chat = document.getElementById('codyChat');
            codyState.isOpen = !codyState.isOpen;
            
            if (codyState.isOpen) {
                chat.classList.add('active');
                updateCodyFace('happy');
            } else {
                chat.classList.remove('active');
                updateCodyFace('normal');
            }
            codyState.lastInteraction = Date.now();
        }
        
        async function codyHelp(topic) {
            try {
                updateCodyFace('thinking');
                const response = await fetch('/api/cody/interact', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        interactionType: topic,
                        context: currentLearningState ? `module_${currentLearningState.moduleId}` : 'general',
                        userMessage: null
                    })
                });
                
                const result = await response.json();
                if (result.success) {
                    showCodyMessage(result.data.response);
                    if (result.data.emotion) {
                        updateCodyFace(result.data.emotion);
                    }
                } else {
                    showCodyMessage('Desculpe, estou com dificuldades no momento. Tente novamente!');
                }
            } catch (error) {
                console.error('Error communicating with Cody:', error);
                showCodyMessage('Ops! Algo deu errado. Vou tentar novamente em instantes.');
            }
        }
        
        function showCodyMessage(message) {
            const messageEl = document.getElementById('codyMessage');
            messageEl.innerHTML = message;
            updateCodyFace('talking');
            setTimeout(() => updateCodyFace('happy'), 2000);
        }
        
        function updateCodyFace(emotion) {
            const faceEl = document.getElementById('codyFace');
            const faces = {
                normal: 'ü§ñ',
                happy: 'üòä',
                thinking: 'ü§î',
                talking: 'üí¨',
                excited: 'üéâ'
            };
            faceEl.textContent = faces[emotion] || faces.normal;
        }
        
        function showNotification(message) {
            const notification = document.getElementById('codyNotification');
            const textEl = document.getElementById('notificationText');
            textEl.textContent = message;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 4000);
        }
        
        function showDashboard() {
            showNotification('Dashboard: Acompanhe seu progresso de aprendizagem em todos os m√≥dulos com an√°lises detalhadas.');
        }
        
        async function showProgress() {
            console.log('showProgress function called');
            try {
                // Hide course grid and show progress interface
                const courseGrid = document.getElementById('courseGrid');
                const navButtons = document.querySelector('.nav-buttons');
                
                if (courseGrid) courseGrid.style.display = 'none';
                if (navButtons) navButtons.style.display = 'none';
                
                // Create progress container if it doesn't exist
                let progressContainer = document.getElementById('progressContainer');
                console.log('Existing progressContainer:', progressContainer);
                
                if (!progressContainer) {
                    console.log('Creating new progress container');
                    progressContainer = document.createElement('div');
                    progressContainer.id = 'progressContainer';
                    progressContainer.innerHTML = `
                        <div class="progress-header">
                            <button class="btn btn-secondary" onclick="hideProgress()">‚Üê Voltar ao Curso</button>
                            <h2>üìä Meu Progresso</h2>
                        </div>
                        <div class="progress-content">
                            <div class="loading-message">Carregando dados de progresso...</div>
                        </div>
                    `;
                    const container = document.querySelector('.container');
                    console.log('Container element:', container);
                    if (container) {
                        container.appendChild(progressContainer);
                        console.log('Progress container added to DOM');
                    } else {
                        console.error('Container element not found');
                    }
                } else {
                    console.log('Using existing progress container');
                }
                
                if (progressContainer) {
                    progressContainer.style.display = 'block';
                    console.log('Progress container display set to block');
                } else {
                    console.error('Progress container is null');
                }
                
                // Load progress data from gamification API
                console.log('Fetching progress data...');
                const response = await fetch('/api/gamification/dashboard/1');
                console.log('Response received:', response.status);
                const result = await response.json();
                console.log('Data received:', result);
                
                if (result.success) {
                    renderProgressData(result.data);
                } else {
                    throw new Error('Failed to load progress data');
                }
            } catch (error) {
                console.error('Error loading progress:', error);
                showNotification('Erro ao carregar progresso. Tente novamente.');
                
                // Show the container anyway with an error message
                let progressContainer = document.getElementById('progressContainer');
                if (progressContainer) {
                    progressContainer.querySelector('.progress-content').innerHTML = `
                        <div class="loading-message">
                            <h3>Erro ao carregar dados de progresso</h3>
                            <p>Verifique sua conex√£o e tente novamente.</p>
                            <button class="btn btn-primary" onclick="refreshProgress()">Tentar Novamente</button>
                        </div>
                    `;
                }
            }
        }
        
        function hideProgress() {
            document.getElementById('progressContainer').style.display = 'none';
            document.getElementById('courseGrid').style.display = 'grid';
            document.querySelector('.nav-buttons').style.display = 'flex';
        }
        
        function renderProgressData(data) {
            console.log('renderProgressData called with:', data);
            const progressContent = document.querySelector('.progress-content');
            console.log('progressContent element:', progressContent);
            
            if (!progressContent) {
                console.error('Progress content element not found');
                return;
            }
            
            const { user, wallet, badges, streak, goals, notifications } = data;
            
            progressContent.innerHTML = `
                <div class="progress-grid">
                    <!-- User Level Card -->
                    <div class="progress-card">
                        <h3>üèÜ N√≠vel Atual</h3>
                        <div class="level-display">
                            <div class="level-icon-large">${user.levelIcon}</div>
                            <div class="level-info">
                                <h4>N√≠vel ${user.level} - ${user.levelName}</h4>
                                <p>${user.totalXP} XP total</p>
                                <div class="xp-progress-bar">
                                    <div class="xp-fill" style="width: ${user.xpProgress}%"></div>
                                </div>
                                <p><span>${user.xpToNext} XP</span> para pr√≥ximo n√≠vel</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Wallet Card -->
                    <div class="progress-card">
                        <h3>üí∞ Carteira Virtual</h3>
                        <div class="wallet-stats">
                            <div class="currency-item">
                                <span class="currency-icon">ü™ô</span>
                                <span class="currency-amount">${wallet.coins}</span>
                                <span class="currency-label">Moedas</span>
                            </div>
                            <div class="currency-item">
                                <span class="currency-icon">üíé</span>
                                <span class="currency-amount">${wallet.gems}</span>
                                <span class="currency-label">Gemas</span>
                            </div>
                        </div>
                        <p>Total ganho: ${wallet.total_coins_earned} moedas</p>
                    </div>
                    
                    <!-- Streak Card -->
                    <div class="progress-card">
                        <h3>üî• Sequ√™ncia de Aprendizado</h3>
                        <div class="streak-info">
                            <div class="streak-current">${streak.current_streak}</div>
                            <p>dias consecutivos</p>
                            <p>Maior sequ√™ncia: <strong>${streak.longest_streak}</strong> dias</p>
                        </div>
                    </div>
                    
                    <!-- Goals Card -->
                    <div class="progress-card">
                        <h3>üéØ Objetivos Di√°rios</h3>
                        <div class="goals-progress">
                            ${goals.map(goal => {
                                const progress = Math.min(100, (goal.current_progress / goal.target_value) * 100);
                                const isCompleted = goal.is_completed;
                                let goalTitle = '';
                                switch (goal.goal_type) {
                                    case 'lessons': goalTitle = `üìñ ${goal.target_value} li√ß√µes`; break;
                                    case 'time_minutes': goalTitle = `‚è±Ô∏è ${goal.target_value} minutos`; break;
                                    case 'xp': goalTitle = `‚≠ê ${goal.target_value} XP`; break;
                                }
                                return `
                                    <div class="goal-item ${isCompleted ? 'completed' : ''}">
                                        <div class="goal-header">
                                            <span>${goalTitle}</span>
                                            <span>${isCompleted ? '‚úÖ' : `${goal.current_progress}/${goal.target_value}`}</span>
                                        </div>
                                        <div class="goal-progress-bar">
                                            <div class="goal-fill" style="width: ${progress}%"></div>
                                        </div>
                                    </div>
                                `;
                            }).join('')}
                        </div>
                    </div>
                    
                    <!-- Badges Card -->
                    <div class="progress-card full-width">
                        <h3>üèÖ Conquistas (${badges.length})</h3>
                        <div class="badges-grid">
                            ${badges.length > 0 ? badges.map(badge => `
                                <div class="badge-item">
                                    <div class="badge-icon">${badge.badge_icon}</div>
                                    <div class="badge-name">${badge.badge_name}</div>
                                </div>
                            `).join('') : '<p>Complete li√ß√µes para desbloquear conquistas!</p>'}
                        </div>
                    </div>
                    
                    <!-- Recent Activity -->
                    <div class="progress-card full-width">
                        <h3>üîî Atividade Recente</h3>
                        <div class="activity-list">
                            ${notifications.length > 0 ? notifications.slice(0, 5).map(notification => `
                                <div class="activity-item">
                                    <span class="activity-icon">${notification.icon}</span>
                                    <div class="activity-content">
                                        <strong>${notification.title}</strong>
                                        <p>${notification.message}</p>
                                        <small>${notification.timeAgo}</small>
                                    </div>
                                </div>
                            `).join('') : '<p>Nenhuma atividade recente</p>'}
                        </div>
                    </div>
                </div>
                
                <div class="progress-actions">
                    <button class="btn btn-primary" onclick="simulateLesson()">üéØ Simular Li√ß√£o</button>
                    <button class="btn btn-secondary" onclick="refreshProgress()">üîÑ Atualizar</button>
                </div>
            `;
        }
        
        async function simulateLesson() {
            try {
                showNotification('Simulando conclus√£o de li√ß√£o...');
                const response = await fetch('/api/gamification/simulate-lesson/1', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' }
                });
                
                const result = await response.json();
                if (result.success) {
                    showNotification(`Li√ß√£o conclu√≠da! +${result.results.xpAwarded} XP, +${result.results.coinsAwarded} moedas`);
                    setTimeout(() => refreshProgress(), 1500);
                } else {
                    throw new Error('Failed to simulate lesson');
                }
            } catch (error) {
                console.error('Error simulating lesson:', error);
                showNotification('Erro ao simular li√ß√£o');
            }
        }
        
        async function refreshProgress() {
            try {
                const response = await fetch('/api/gamification/dashboard/1');
                const result = await response.json();
                
                if (result.success) {
                    renderProgressData(result.data);
                    showNotification('Progresso atualizado!');
                } else {
                    throw new Error('Failed to refresh progress');
                }
            } catch (error) {
                console.error('Error refreshing progress:', error);
                showNotification('Erro ao atualizar progresso');
            }
        }
        
        window.onclick = function(event) {
            const modal = document.getElementById('lessonModal');
            if (event.target == modal) {
                closeModal();
            }
        }
        
        // Enhanced initialization with performance tracking
        document.addEventListener('DOMContentLoaded', async function() {
            const initStart = performance.now();
            
            // Load course data with performance monitoring
            await loadCourseData();
            if (courseModules.length === 0) {
                courseModules = staticCourseModules;
                renderCourseModules();
            }
            
            // Load dynamic statistics
            await loadDynamicStats();
            
            // Update performance indicator
            const loadTime = Math.round(performance.now() - initStart);
            document.getElementById('load-time').textContent = `Carregado em ${loadTime}ms`;
            
            console.log('Cody Verse initialized successfully');
        });
        
        // Load dynamic statistics from APIs
        async function loadDynamicStats() {
            try {
                const [coursesResponse, progressResponse] = await Promise.all([
                    fetch('/api/courses').catch(() => null),
                    fetch('/api/gamification/dashboard/1').catch(() => null)
                ]);
                
                if (coursesResponse) {
                    const coursesData = await coursesResponse.json();
                    if (coursesData.success && coursesData.data) {
                        document.getElementById('total-courses').textContent = coursesData.data.length;
                        
                        let totalLessons = 0;
                        for (const course of coursesData.data) {
                            try {
                                const lessonsResponse = await fetch(`/api/courses/${course.id}/lessons`);
                                const lessonsData = await lessonsResponse.json();
                                if (lessonsData.success && lessonsData.data) {
                                    totalLessons += lessonsData.data.length;
                                }
                            } catch (e) {
                                // Continue counting
                            }
                        }
                        if (totalLessons > 0) {
                            document.getElementById('total-lessons').textContent = totalLessons;
                        }
                    }
                }
                
                if (progressResponse) {
                    const progressData = await progressResponse.json();
                    if (progressData.success && progressData.data) {
                        document.getElementById('user-xp').textContent = progressData.data.totalXP?.toLocaleString() || '2,450';
                        
                        const completionRate = Math.round((progressData.data.completedLessons / 27) * 100) || 68;
                        document.getElementById('completion-rate').textContent = completionRate + '%';
                    }
                }
                
            } catch (error) {
                console.error('Error loading dynamic stats:', error);
                // Stats will use default values already set in HTML
            }
        }
        
        // Setup additional event handlers
        document.addEventListener('DOMContentLoaded', function() {
            // Setup event listeners for Cody interactions
            const codyToggle = document.querySelector('[data-cody-toggle]');
            if (codyToggle) {
                codyToggle.addEventListener('click', toggleCody);
            }
            
            const codyOptions = document.querySelectorAll('[data-cody-topic]');
            codyOptions.forEach(option => {
                option.addEventListener('click', function() {
                    const topic = this.getAttribute('data-cody-topic');
                    codyHelp(topic);
                });
            });
            
            // Setup learning interface event listeners
            const closeLearning = document.querySelector('[data-close-learning]');
            if (closeLearning) {
                closeLearning.addEventListener('click', closeLearningInterface);
            }
            
            const prevBtn = document.querySelector('[data-lesson-prev]');
            if (prevBtn) {
                prevBtn.addEventListener('click', previousLesson);
            }
            
            const nextBtn = document.querySelector('[data-lesson-next]');
            if (nextBtn) {
                nextBtn.addEventListener('click', nextLesson);
            }
            
            // Setup progress button event listener
            const progressBtn = document.getElementById('progressBtn');
            if (progressBtn) {
                progressBtn.addEventListener('click', showProgress);
                console.log('Progress button event listener added');
            }
            
            setTimeout(() => {
                showNotification("Bem-vindo! Sou o Cody, seu companheiro de aprendizagem. Clique em mim quando precisar de ajuda!");
            }, 2000);
        });
    </script>
</body>
</html>