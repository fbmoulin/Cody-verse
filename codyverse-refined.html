<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CodyVerse - Educational Platform</title>
    <style>
        :root {
            /* Base Theme Colors */
            --primary: 79 70 229;        /* #4F46E5 */
            --secondary: 34 211 238;     /* #22D3EE */
            --accent: 250 204 21;        /* #FACC15 */
            --background: 31 41 55;      /* #1F2937 */
            --background-secondary: 55 65 81;  /* #374151 */
            --foreground: 249 250 251;   /* #F9FAFB */
            --muted: 107 114 128;        /* #6B7280 */
            --muted-foreground: 156 163 175; /* #9CA3AF */
            
            /* Status Colors */
            --success: 16 185 129;       /* #10B981 */
            --warning: 245 158 11;       /* #F59E0B */
            --error: 239 68 68;          /* #EF4444 */
            --info: 59 130 246;          /* #3B82F6 */
            
            /* Card and Surface Colors */
            --card: 31 41 55;            /* #1F2937 */
            --card-foreground: 249 250 251; /* #F9FAFB */
            --popover: 31 41 55;         /* #1F2937 */
            --popover-foreground: 249 250 251; /* #F9FAFB */
            
            /* Border and Input Colors */
            --border: 75 85 99;          /* #4B5563 */
            --input: 55 65 81;           /* #374151 */
            --ring: 79 70 229;           /* #4F46E5 */
            
            /* Derived Values */
            --gradient-primary: linear-gradient(135deg, hsl(var(--primary)) 0%, hsl(var(--secondary)) 100%);
            --gradient-background: linear-gradient(135deg, hsl(var(--background)) 0%, hsl(var(--background-secondary)) 100%);
            
            /* Layout Variables */
            --border-radius: 16px;
            --border-radius-lg: 16px;
            --border-radius-md: 12px;
            --border-radius-sm: 8px;
            --spacing-xs: 0.5rem;
            --spacing-sm: 1rem;
            --spacing-md: 1.5rem;
            --spacing-lg: 2rem;
            --spacing-xl: 3rem;
            
            /* Animation and Effects */
            --transition-fast: 0.15s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-normal: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-slow: 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            --shadow-sm: 0 4px 6px rgba(0, 0, 0, 0.1);
            --shadow-md: 0 10px 25px rgba(0, 0, 0, 0.2);
            --shadow-lg: 0 20px 40px rgba(0, 0, 0, 0.3);
            --blur-backdrop: 20px;
            
            /* Typography */
            --font-size-xs: 0.75rem;
            --font-size-sm: 0.875rem;
            --font-size-base: 1rem;
            --font-size-lg: 1.125rem;
            --font-size-xl: 1.25rem;
            --font-size-2xl: 1.5rem;
            --font-size-3xl: 1.875rem;
            --font-size-4xl: 2.25rem;
        }

        /* Cyberpunk Theme */
        [data-theme="cyberpunk"] {
            --primary: 236 72 153;       /* #EC4899 - Neon Pink */
            --secondary: 6 182 212;      /* #06B6D4 - Cyan */
            --accent: 168 85 247;        /* #A855F7 - Purple */
            --background: 15 23 42;      /* #0F172A - Deep Dark */
            --background-secondary: 30 41 59; /* #1E293B */
            --foreground: 248 250 252;   /* #F8FAFC */
            --success: 34 197 94;        /* #22C55E */
            --warning: 251 191 36;       /* #FBBF24 */
            --error: 248 113 113;        /* #F87171 */
            --card: 15 23 42;            /* #0F172A */
            --border: 51 65 85;          /* #334155 */
            --input: 30 41 59;           /* #1E293B */
        }

        /* Ocean Theme */
        [data-theme="ocean"] {
            --primary: 14 165 233;       /* #0EA5E9 - Ocean Blue */
            --secondary: 6 182 212;      /* #06B6D4 - Cyan */
            --accent: 34 211 238;        /* #22D3EE - Light Blue */
            --background: 12 74 110;     /* #0C4A6E */
            --background-secondary: 7 89 133; /* #075985 */
            --foreground: 240 249 255;   /* #F0F9FF */
            --success: 5 150 105;        /* #059669 */
            --warning: 217 119 6;        /* #D97706 */
            --error: 220 38 38;          /* #DC2626 */
            --card: 12 74 110;           /* #0C4A6E */
            --border: 30 64 175;         /* #1E40AF */
            --input: 7 89 133;           /* #075985 */
        }

        /* Forest Theme */
        [data-theme="forest"] {
            --primary: 34 197 94;        /* #22C55E - Forest Green */
            --secondary: 132 204 22;     /* #84CC16 - Lime */
            --accent: 250 204 21;        /* #FACC15 - Yellow */
            --background: 20 83 45;      /* #14532D */
            --background-secondary: 22 101 52; /* #166534 */
            --foreground: 240 253 244;   /* #F0FDF4 */
            --success: 34 197 94;        /* #22C55E */
            --warning: 245 158 11;       /* #F59E0B */
            --error: 239 68 68;          /* #EF4444 */
            --card: 20 83 45;            /* #14532D */
            --border: 34 197 94;         /* #22C55E */
            --input: 22 101 52;          /* #166534 */
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: var(--gradient-background);
            color: hsl(var(--foreground));
            min-height: 100vh;
            line-height: 1.6;
            overflow-x: hidden;
            transition: var(--transition-normal);
        }

        /* Enhanced Navigation */
        .navbar {
            background: hsla(var(--background), 0.95);
            backdrop-filter: blur(var(--blur-backdrop));
            border-bottom: 1px solid hsla(var(--border), 0.3);
            padding: var(--spacing-sm) var(--spacing-lg);
            position: sticky;
            top: 0;
            z-index: 1000;
            transition: var(--transition-normal);
        }

        .navbar.scrolled {
            background: hsla(var(--background), 0.98);
            box-shadow: var(--shadow-md);
        }

        .nav-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1400px;
            margin: 0 auto;
        }

        .logo {
            font-size: var(--font-size-2xl);
            font-weight: 800;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
        }

        .nav-links {
            display: flex;
            gap: var(--spacing-xs);
            list-style: none;
        }

        .nav-link {
            color: hsl(var(--foreground));
            text-decoration: none;
            font-weight: 500;
            padding: 0.75rem 1.5rem;
            border-radius: var(--border-radius-md);
            transition: var(--transition-normal);
            position: relative;
            overflow: hidden;
        }

        .nav-link::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: var(--gradient-primary);
            transition: var(--transition);
            z-index: -1;
        }

        .nav-link:hover::before,
        .nav-link.active::before {
            left: 0;
        }

        .nav-link:hover,
        .nav-link.active {
            color: white;
            transform: translateY(-1px);
        }

        /* Enhanced Layout */
        .dashboard {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
            display: grid;
            grid-template-columns: 1fr 350px;
            gap: 2rem;
            min-height: calc(100vh - 100px);
        }

        .main-content {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        /* Enhanced Cards */
        .card {
            background: hsla(var(--card), 0.05);
            border: 1px solid hsla(var(--border), 0.3);
            border-radius: var(--border-radius);
            padding: var(--spacing-lg);
            backdrop-filter: blur(var(--blur-backdrop));
            transition: var(--transition-normal);
            position: relative;
            overflow: hidden;
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--gradient-primary);
            transform: scaleX(0);
            transition: var(--transition-normal);
        }

        .card:hover::before {
            transform: scaleX(1);
        }

        .card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
            border-color: hsla(var(--border), 0.5);
        }

        /* Enhanced Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: var(--gradient-primary);
            border-radius: var(--border-radius);
            padding: var(--spacing-lg);
            color: white;
            position: relative;
            overflow: hidden;
            transition: var(--transition-normal);
            cursor: pointer;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at 20% 20%, rgba(255, 255, 255, 0.1) 0%, transparent 50%);
            pointer-events: none;
        }

        .stat-card:hover {
            transform: translateY(-6px) scale(1.02);
            box-shadow: var(--shadow-lg);
        }

        .stat-value {
            font-size: 2.75rem;
            font-weight: 900;
            margin-bottom: 0.5rem;
            line-height: 1;
        }

        .stat-label {
            font-size: 1rem;
            opacity: 0.9;
            font-weight: 500;
        }

        .stat-icon {
            position: absolute;
            top: 1.5rem;
            right: 1.5rem;
            font-size: 2.5rem;
            opacity: 0.7;
        }

        .stat-change {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-top: 0.5rem;
            font-size: 0.875rem;
            opacity: 0.8;
        }

        /* Enhanced Progress Components */
        .progress-container {
            margin: 1.5rem 0;
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .progress-label {
            font-weight: 600;
            font-size: 1.1rem;
        }

        .progress-value {
            font-weight: 500;
            color: var(--secondary);
        }

        .progress-bar {
            width: 100%;
            height: 14px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 7px;
            overflow: hidden;
            position: relative;
        }

        .progress-fill {
            height: 100%;
            background: var(--gradient-primary);
            border-radius: 7px;
            transition: width 1.5s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        /* Enhanced Notifications */
        .notification {
            display: flex;
            gap: 1rem;
            padding: 1.5rem;
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.05);
            border-left: 4px solid var(--secondary);
            margin-bottom: 1rem;
            transition: var(--transition);
            cursor: pointer;
        }

        .notification:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(4px);
        }

        .notification-icon {
            font-size: 1.5rem;
            flex-shrink: 0;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--gradient-primary);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .notification-content {
            flex: 1;
        }

        .notification-title {
            margin-bottom: 0.25rem;
            color: var(--secondary);
            font-weight: 600;
            font-size: 1.1rem;
        }

        .notification-message {
            margin-bottom: 0.5rem;
            opacity: 0.9;
        }

        .notification-time {
            font-size: 0.875rem;
            opacity: 0.7;
            font-weight: 500;
        }

        /* Enhanced Course Grid */
        .courses-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
        }

        .course-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--border-radius);
            padding: 2rem;
            transition: var(--transition);
            cursor: pointer;
            border: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
            overflow: hidden;
        }

        .course-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--gradient-primary);
            transform: scaleX(0);
            transition: var(--transition);
        }

        .course-card:hover::before {
            transform: scaleX(1);
        }

        .course-card:hover {
            transform: translateY(-6px);
            box-shadow: var(--shadow-lg);
            border-color: rgba(255, 255, 255, 0.2);
        }

        .course-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1.5rem;
        }

        .course-difficulty {
            display: inline-block;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.875rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .difficulty-iniciante {
            background: rgba(16, 185, 129, 0.2);
            color: var(--success);
            border: 1px solid rgba(16, 185, 129, 0.3);
        }

        .difficulty-intermediario {
            background: rgba(245, 158, 11, 0.2);
            color: var(--warning);
            border: 1px solid rgba(245, 158, 11, 0.3);
        }

        .difficulty-avancado {
            background: rgba(239, 68, 68, 0.2);
            color: var(--error);
            border: 1px solid rgba(239, 68, 68, 0.3);
        }

        .course-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
            line-height: 1.3;
        }

        .course-description {
            opacity: 0.9;
            margin-bottom: 1.5rem;
            line-height: 1.6;
        }

        .course-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.95rem;
            font-weight: 500;
        }

        .course-lessons {
            color: var(--secondary);
        }

        .course-xp {
            color: var(--accent);
        }

        /* Enhanced Badge System */
        .badges-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 1.5rem;
        }

        .badge-item {
            text-align: center;
            padding: 1.5rem;
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.05);
            transition: var(--transition);
            cursor: pointer;
            border: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
        }

        .badge-item:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-md);
            background: rgba(255, 255, 255, 0.1);
        }

        .badge-item.locked {
            opacity: 0.6;
            filter: grayscale(1);
        }

        .badge-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            display: block;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
        }

        .badge-name {
            font-weight: 700;
            margin-bottom: 0.5rem;
            font-size: 1.1rem;
        }

        .badge-description {
            font-size: 0.875rem;
            opacity: 0.8;
            line-height: 1.4;
        }

        .badge-rarity {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            padding: 0.25rem 0.5rem;
            border-radius: 6px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .rarity-common {
            background: rgba(156, 163, 175, 0.2);
            color: #9CA3AF;
        }

        .rarity-rare {
            background: rgba(34, 211, 238, 0.2);
            color: var(--secondary);
        }

        .rarity-epic {
            background: rgba(168, 85, 247, 0.2);
            color: #A855F7;
        }

        .rarity-legendary {
            background: rgba(245, 158, 11, 0.2);
            color: var(--warning);
        }

        /* Loading States */
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 3rem;
            font-size: 1.1rem;
            opacity: 0.7;
        }

        .spinner {
            width: 24px;
            height: 24px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: var(--secondary);
            animation: spin 1s linear infinite;
            margin-right: 1rem;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .skeleton {
            background: linear-gradient(90deg, rgba(255, 255, 255, 0.1) 25%, rgba(255, 255, 255, 0.2) 50%, rgba(255, 255, 255, 0.1) 75%);
            background-size: 200% 100%;
            animation: skeleton-loading 1.5s infinite;
            border-radius: 8px;
        }

        @keyframes skeleton-loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        /* Tab System */
        .hidden {
            display: none;
        }

        .tab-content {
            animation: fadeIn 0.5s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Theme Switcher Styles */
        .theme-switcher {
            position: relative;
        }

        .theme-btn {
            background: hsla(var(--card), 0.1);
            border: 1px solid hsla(var(--border), 0.3);
            border-radius: var(--border-radius-sm);
            padding: 0.75rem;
            font-size: var(--font-size-lg);
            cursor: pointer;
            transition: var(--transition-normal);
            color: hsl(var(--foreground));
        }

        .theme-btn:hover {
            background: hsla(var(--card), 0.2);
            transform: scale(1.05);
        }

        .theme-menu {
            position: absolute;
            top: 100%;
            right: 0;
            margin-top: 0.5rem;
            background: hsl(var(--card));
            border: 1px solid hsla(var(--border), 0.3);
            border-radius: var(--border-radius-md);
            padding: var(--spacing-sm);
            min-width: 200px;
            box-shadow: var(--shadow-lg);
            backdrop-filter: blur(var(--blur-backdrop));
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: var(--transition-normal);
            z-index: 1000;
        }

        .theme-menu.visible {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .theme-option {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            padding: var(--spacing-sm);
            border-radius: var(--border-radius-sm);
            cursor: pointer;
            transition: var(--transition-fast);
            color: hsl(var(--foreground));
        }

        .theme-option:hover {
            background: hsla(var(--primary), 0.1);
        }

        .theme-option.active {
            background: hsla(var(--primary), 0.2);
            color: hsl(var(--primary));
        }

        .theme-preview {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            border: 2px solid hsla(var(--border), 0.3);
        }

        .theme-preview-default {
            background: linear-gradient(135deg, hsl(79 70 229) 0%, hsl(34 211 238) 100%);
        }

        .theme-preview-cyberpunk {
            background: linear-gradient(135deg, hsl(236 72 153) 0%, hsl(6 182 212) 100%);
        }

        .theme-preview-ocean {
            background: linear-gradient(135deg, hsl(14 165 233) 0%, hsl(6 182 212) 100%);
        }

        .theme-preview-forest {
            background: linear-gradient(135deg, hsl(34 197 94) 0%, hsl(132 204 22) 100%);
        }

        /* Enhanced Responsive Design */
        @media (max-width: 1200px) {
            .dashboard {
                grid-template-columns: 1fr;
                padding: 1.5rem;
            }
            
            .sidebar {
                order: -1;
            }
        }

        @media (max-width: 768px) {
            .navbar {
                padding: 1rem;
            }
            
            .nav-links {
                display: none;
            }
            
            .logo {
                font-size: 1.5rem;
            }
            
            .dashboard {
                padding: 1rem;
                gap: 1.5rem;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
            
            .courses-grid {
                grid-template-columns: 1fr;
            }
            
            .card {
                padding: 1.5rem;
            }
            
            .stat-card {
                padding: 1.5rem;
            }
        }

        /* Utility Classes */
        .text-gradient {
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .glow {
            box-shadow: 0 0 20px rgba(79, 70, 229, 0.3);
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
    </style>
</head>
<body>
    <nav class="navbar" id="navbar">
        <div class="nav-content">
            <div class="logo">
                🚀 CodyVerse
            </div>
            <ul class="nav-links">
                <li><a class="nav-link active" onclick="showTab('dashboard')" data-tab="dashboard">Dashboard</a></li>
                <li><a class="nav-link" onclick="showTab('courses')" data-tab="courses">Cursos</a></li>
                <li><a class="nav-link" onclick="showTab('achievements')" data-tab="achievements">Conquistas</a></li>
                <li class="theme-switcher">
                    <button class="theme-btn" onclick="toggleThemeMenu()" title="Trocar Tema">
                        🎨
                    </button>
                    <div class="theme-menu" id="themeMenu">
                        <div class="theme-option" data-theme="default" onclick="switchTheme('default')">
                            <div class="theme-preview theme-preview-default"></div>
                            <span>Padrão</span>
                        </div>
                        <div class="theme-option" data-theme="cyberpunk" onclick="switchTheme('cyberpunk')">
                            <div class="theme-preview theme-preview-cyberpunk"></div>
                            <span>Cyberpunk</span>
                        </div>
                        <div class="theme-option" data-theme="ocean" onclick="switchTheme('ocean')">
                            <div class="theme-preview theme-preview-ocean"></div>
                            <span>Ocean</span>
                        </div>
                        <div class="theme-option" data-theme="forest" onclick="switchTheme('forest')">
                            <div class="theme-preview theme-preview-forest"></div>
                            <span>Forest</span>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
    </nav>

    <!-- Dashboard Tab -->
    <div id="dashboard-tab" class="tab-content">
        <div class="dashboard">
            <div class="main-content">
                <div class="stats-grid">
                    <div class="stat-card" onclick="showLevelDetails()">
                        <div class="stat-icon" id="level-icon">🌱</div>
                        <div class="stat-value" id="user-level">--</div>
                        <div class="stat-label">Nível Atual</div>
                        <div class="stat-change" id="level-change">
                            <span>↗️ Próximo: <span id="next-level-name">Explorador</span></span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">⚡</div>
                        <div class="stat-value" id="user-xp">--</div>
                        <div class="stat-label">Total XP</div>
                        <div class="stat-change" id="xp-change">
                            <span>📈 Esta semana</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">🪙</div>
                        <div class="stat-value" id="user-coins">--</div>
                        <div class="stat-label">Moedas</div>
                        <div class="stat-change" id="coins-change">
                            <span>💰 Ganhas hoje</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">🔥</div>
                        <div class="stat-value" id="user-streak">--</div>
                        <div class="stat-label">Sequência</div>
                        <div class="stat-change" id="streak-change">
                            <span>🎯 Melhor: <span id="best-streak">0</span> dias</span>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h2 style="margin-bottom: 1.5rem; font-size: 1.5rem;">Progresso do Nível</h2>
                    <div class="progress-container">
                        <div class="progress-header">
                            <span class="progress-label" id="level-name">Iniciante</span>
                            <span class="progress-value" id="xp-progress">0/100 XP</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="level-progress" style="width: 0%"></div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h2 style="margin-bottom: 1.5rem; font-size: 1.5rem;">Objetivos Diários</h2>
                    <div id="daily-goals">
                        <div class="loading">
                            <div class="spinner"></div>
                            Carregando objetivos...
                        </div>
                    </div>
                </div>
            </div>

            <div class="sidebar">
                <div class="card">
                    <h3 style="margin-bottom: 1.5rem; font-size: 1.25rem;">Notificações Recentes</h3>
                    <div id="notifications-list">
                        <div class="loading">
                            <div class="spinner"></div>
                            Carregando notificações...
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h3 style="margin-bottom: 1.5rem; font-size: 1.25rem;">Conquistas Recentes</h3>
                    <div class="badges-grid" id="recent-badges">
                        <div class="loading">
                            <div class="spinner"></div>
                            Carregando conquistas...
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Courses Tab -->
    <div id="courses-tab" class="tab-content hidden">
        <div style="max-width: 1400px; margin: 0 auto; padding: 2rem;">
            <h1 style="margin-bottom: 2rem; font-size: 2.5rem; font-weight: 800;" class="text-gradient">
                Cursos Disponíveis
            </h1>
            <div class="courses-grid" id="courses-list">
                <div class="loading">
                    <div class="spinner"></div>
                    Carregando cursos...
                </div>
            </div>
        </div>
    </div>

    <!-- Achievements Tab -->
    <div id="achievements-tab" class="tab-content hidden">
        <div style="max-width: 1400px; margin: 0 auto; padding: 2rem;">
            <h1 style="margin-bottom: 2rem; font-size: 2.5rem; font-weight: 800;" class="text-gradient">
                Suas Conquistas
            </h1>
            <div class="badges-grid" style="grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));" id="all-badges">
                <div class="loading">
                    <div class="spinner"></div>
                    Carregando conquistas...
                </div>
            </div>
        </div>
    </div>

    <script>
        // Enhanced App State Management
        class AppState {
            constructor() {
                this.data = {
                    dashboard: null,
                    courses: null,
                    badges: null
                };
                this.currentTab = 'dashboard';
                this.cache = new Map();
                this.loading = new Set();
            }

            set(key, value) {
                this.data[key] = value;
                this.cache.set(key, { value, timestamp: Date.now() });
            }

            get(key) {
                return this.data[key];
            }

            isLoading(key) {
                return this.loading.has(key);
            }

            setLoading(key, loading) {
                if (loading) {
                    this.loading.add(key);
                } else {
                    this.loading.delete(key);
                }
            }
        }

        // Enhanced API Client
        class APIClient {
            constructor(baseURL = '/api') {
                this.baseURL = baseURL;
                this.timeout = 5000;
            }

            async request(endpoint, options = {}) {
                const controller = new AbortController();
                const timeoutId = setTimeout(() => controller.abort(), this.timeout);

                try {
                    const response = await fetch(`${this.baseURL}${endpoint}`, {
                        ...options,
                        signal: controller.signal
                    });

                    clearTimeout(timeoutId);

                    if (!response.ok) {
                        throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                    }

                    return await response.json();
                } catch (error) {
                    clearTimeout(timeoutId);
                    
                    if (error.name === 'AbortError') {
                        throw new Error('Request timeout');
                    }
                    
                    throw error;
                }
            }

            async get(endpoint) {
                return this.request(endpoint);
            }

            async post(endpoint, data) {
                return this.request(endpoint, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });
            }
        }

        // App initialization
        const appState = new AppState();
        const api = new APIClient();

        // Enhanced UI Components
        const UI = {
            showLoading(containerId) {
                const container = document.getElementById(containerId);
                if (container) {
                    container.innerHTML = `
                        <div class="loading">
                            <div class="spinner"></div>
                            Carregando...
                        </div>
                    `;
                }
            },

            showError(containerId, message) {
                const container = document.getElementById(containerId);
                if (container) {
                    container.innerHTML = `
                        <div style="text-align: center; padding: 2rem; opacity: 0.7;">
                            <div style="font-size: 2rem; margin-bottom: 1rem;">⚠️</div>
                            <p>${message}</p>
                        </div>
                    `;
                }
            },

            animateValue(element, start, end, duration = 1000) {
                const range = end - start;
                const startTime = performance.now();

                const updateValue = (currentTime) => {
                    const elapsed = currentTime - startTime;
                    const progress = Math.min(elapsed / duration, 1);
                    const easeProgress = 1 - Math.pow(1 - progress, 3); // Ease out cubic
                    const current = Math.round(start + (range * easeProgress));
                    
                    element.textContent = current.toLocaleString();
                    
                    if (progress < 1) {
                        requestAnimationFrame(updateValue);
                    }
                };

                requestAnimationFrame(updateValue);
            }
        };

        // Theme Management
        class ThemeManager {
            constructor() {
                this.currentTheme = localStorage.getItem('codyverse-theme') || 'default';
                this.init();
            }

            init() {
                this.applyTheme(this.currentTheme);
                this.updateThemeUI();
            }

            applyTheme(themeName) {
                const body = document.body;
                
                // Remove all theme classes
                body.removeAttribute('data-theme');
                
                // Apply new theme if not default
                if (themeName !== 'default') {
                    body.setAttribute('data-theme', themeName);
                }
                
                this.currentTheme = themeName;
                localStorage.setItem('codyverse-theme', themeName);
                
                // Add smooth transition for theme change
                body.style.transition = 'all 0.3s ease';
                setTimeout(() => {
                    body.style.transition = '';
                }, 300);
            }

            updateThemeUI() {
                document.querySelectorAll('.theme-option').forEach(option => {
                    option.classList.toggle('active', option.dataset.theme === this.currentTheme);
                });
            }

            switchTheme(themeName) {
                this.applyTheme(themeName);
                this.updateThemeUI();
                this.hideThemeMenu();
                
                // Trigger a custom event for theme change
                window.dispatchEvent(new CustomEvent('themeChanged', { 
                    detail: { theme: themeName } 
                }));
            }

            toggleThemeMenu() {
                const menu = document.getElementById('themeMenu');
                menu.classList.toggle('visible');
            }

            hideThemeMenu() {
                const menu = document.getElementById('themeMenu');
                menu.classList.remove('visible');
            }
        }

        // Initialize theme manager
        const themeManager = new ThemeManager();

        // Global theme functions
        function switchTheme(themeName) {
            themeManager.switchTheme(themeName);
        }

        function toggleThemeMenu() {
            themeManager.toggleThemeMenu();
        }

        // Close theme menu when clicking outside
        document.addEventListener('click', (e) => {
            const themeSwitcher = document.querySelector('.theme-switcher');
            if (!themeSwitcher.contains(e.target)) {
                themeManager.hideThemeMenu();
            }
        });

        // Enhanced Tab Management
        function showTab(tabName) {
            // Update navigation
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');

            // Hide all tabs
            document.querySelectorAll('[id$="-tab"]').forEach(tab => {
                tab.classList.add('hidden');
            });

            // Show selected tab
            document.getElementById(`${tabName}-tab`).classList.remove('hidden');

            appState.currentTab = tabName;

            // Load data if needed
            if (tabName === 'dashboard' && !appState.get('dashboard')) {
                loadDashboard();
            } else if (tabName === 'courses' && !appState.get('courses')) {
                loadCourses();
            } else if (tabName === 'achievements' && !appState.get('badges')) {
                loadBadges();
            }
        }

        // Enhanced Dashboard Loading
        async function loadDashboard() {
            if (appState.isLoading('dashboard')) return;

            appState.setLoading('dashboard', true);

            try {
                const result = await api.get('/dashboard/1');

                if (result.success) {
                    appState.set('dashboard', result.data);
                    updateDashboardUI(result.data);
                } else {
                    throw new Error(result.message || 'Failed to load dashboard');
                }
            } catch (error) {
                console.error('Dashboard loading error:', error);
                UI.showError('daily-goals', 'Erro ao carregar dados do dashboard');
                UI.showError('notifications-list', 'Erro ao carregar notificações');
                UI.showError('recent-badges', 'Erro ao carregar conquistas');
            } finally {
                appState.setLoading('dashboard', false);
            }
        }

        function updateDashboardUI(data) {
            const { user, wallet, streak, goals, notifications, badges } = data;

            // Animate stats
            UI.animateValue(document.getElementById('user-level'), 0, user.level);
            UI.animateValue(document.getElementById('user-xp'), 0, user.totalXP);
            UI.animateValue(document.getElementById('user-coins'), 0, wallet.coins);
            UI.animateValue(document.getElementById('user-streak'), 0, streak.current_streak);

            // Update level info
            document.getElementById('level-icon').textContent = user.levelIcon;
            document.getElementById('level-name').textContent = user.levelName;
            document.getElementById('xp-progress').textContent = `${user.xpProgress}/${user.xpProgress + user.xpToNext} XP`;
            document.getElementById('best-streak').textContent = streak.longest_streak;

            // Update progress bar
            const progressPercent = Math.min((user.xpProgress / (user.xpProgress + user.xpToNext)) * 100, 100);
            setTimeout(() => {
                document.getElementById('level-progress').style.width = `${progressPercent}%`;
            }, 500);

            // Update goals
            updateGoals(goals);
            updateNotifications(notifications);
            updateRecentBadges(badges);
        }

        function updateGoals(goals) {
            const container = document.getElementById('daily-goals');
            
            if (!goals || goals.length === 0) {
                container.innerHTML = '<p style="opacity: 0.7; text-align: center;">Nenhum objetivo diário configurado.</p>';
                return;
            }
            
            container.innerHTML = goals.map(goal => {
                const progressPercent = Math.min((goal.current_progress / goal.target_value) * 100, 100);
                const goalType = goal.goal_type === 'daily_xp' ? 'XP Diário' : 'Lições Diárias';
                const isCompleted = goal.is_completed;
                
                return `
                    <div class="progress-container">
                        <div class="progress-header">
                            <span class="progress-label">
                                ${isCompleted ? '✅' : '🎯'} ${goalType}
                            </span>
                            <span class="progress-value">${goal.current_progress}/${goal.target_value}</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${progressPercent}%"></div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function updateNotifications(notifications) {
            const container = document.getElementById('notifications-list');
            
            if (!notifications || notifications.length === 0) {
                container.innerHTML = '<p style="opacity: 0.7; text-align: center;">Nenhuma notificação recente.</p>';
                return;
            }
            
            container.innerHTML = notifications.slice(0, 3).map(notification => `
                <div class="notification" onclick="markNotificationRead('${notification.id}')">
                    <div class="notification-icon">${notification.icon}</div>
                    <div class="notification-content">
                        <div class="notification-title">${notification.title}</div>
                        <div class="notification-message">${notification.message}</div>
                        <div class="notification-time">${notification.timeAgo}</div>
                    </div>
                </div>
            `).join('');
        }

        function updateRecentBadges(badges) {
            const container = document.getElementById('recent-badges');
            
            if (!badges || badges.length === 0) {
                container.innerHTML = '<p style="opacity: 0.7; grid-column: 1/-1; text-align: center;">Nenhuma conquista ainda.</p>';
                return;
            }
            
            container.innerHTML = badges.slice(0, 4).map(badge => `
                <div class="badge-item ${badge.is_locked ? 'locked' : ''}" onclick="showBadgeDetails('${badge.id}')">
                    ${badge.rarity ? `<div class="badge-rarity rarity-${badge.rarity}">${badge.rarity}</div>` : ''}
                    <span class="badge-icon">${badge.icon}</span>
                    <div class="badge-name">${badge.name}</div>
                    <div class="badge-description">${badge.description}</div>
                </div>
            `).join('');
        }

        // Enhanced Courses Loading
        async function loadCourses() {
            if (appState.isLoading('courses')) return;

            appState.setLoading('courses', true);
            UI.showLoading('courses-list');

            try {
                const result = await api.get('/courses');

                if (result.success) {
                    appState.set('courses', result.data);
                    updateCoursesUI(result.data);
                } else {
                    throw new Error(result.message || 'Failed to load courses');
                }
            } catch (error) {
                console.error('Courses loading error:', error);
                UI.showError('courses-list', 'Erro ao carregar cursos');
            } finally {
                appState.setLoading('courses', false);
            }
        }

        function updateCoursesUI(courses) {
            const container = document.getElementById('courses-list');
            
            container.innerHTML = courses.map(course => `
                <div class="course-card" onclick="openCourse('${course.id}')">
                    <div class="course-header">
                        <div class="course-difficulty difficulty-${course.difficulty.toLowerCase()}">
                            ${course.difficulty}
                        </div>
                    </div>
                    <h3 class="course-title">${course.title}</h3>
                    <p class="course-description">${course.description}</p>
                    <div class="course-meta">
                        <span class="course-lessons">📚 ${course.lesson_count} lições</span>
                        <span class="course-xp">⚡ ${course.total_xp} XP</span>
                    </div>
                </div>
            `).join('');
        }

        // Enhanced Badges Loading
        async function loadBadges() {
            if (appState.isLoading('badges')) return;

            appState.setLoading('badges', true);
            UI.showLoading('all-badges');

            try {
                const result = await api.get('/badges/1');

                if (result.success) {
                    appState.set('badges', result.data);
                    updateBadgesUI(result.data);
                } else {
                    throw new Error(result.message || 'Failed to load badges');
                }
            } catch (error) {
                console.error('Badges loading error:', error);
                UI.showError('all-badges', 'Erro ao carregar conquistas');
            } finally {
                appState.setLoading('badges', false);
            }
        }

        function updateBadgesUI(badges) {
            const container = document.getElementById('all-badges');
            
            container.innerHTML = badges.map(badge => `
                <div class="badge-item ${badge.is_locked ? 'locked' : ''}" onclick="showBadgeDetails('${badge.id}')">
                    ${badge.rarity ? `<div class="badge-rarity rarity-${badge.rarity}">${badge.rarity}</div>` : ''}
                    <span class="badge-icon">${badge.icon}</span>
                    <div class="badge-name">${badge.name}</div>
                    <div class="badge-description">${badge.description}</div>
                    ${badge.unlocked_at && !badge.is_locked ? `<div style="margin-top: 0.5rem; font-size: 0.75rem; opacity: 0.7;">Desbloqueado ${badge.timeAgo}</div>` : ''}
                </div>
            `).join('');
        }

        // Event Handlers
        function markNotificationRead(notificationId) {
            console.log('Marking notification as read:', notificationId);
        }

        function showBadgeDetails(badgeId) {
            console.log('Showing badge details:', badgeId);
        }

        function showLevelDetails() {
            console.log('Showing level details');
        }

        function openCourse(courseId) {
            console.log('Opening course:', courseId);
        }

        // Enhanced scroll effects
        let lastScrollY = window.scrollY;

        window.addEventListener('scroll', () => {
            const navbar = document.getElementById('navbar');
            const currentScrollY = window.scrollY;

            if (currentScrollY > 50) {
                navbar.classList.add('scrolled');
            } else {
                navbar.classList.remove('scrolled');
            }

            lastScrollY = currentScrollY;
        });

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            loadDashboard();
            
            // Add smooth loading animation
            document.body.style.opacity = '0';
            setTimeout(() => {
                document.body.style.transition = 'opacity 0.5s ease-out';
                document.body.style.opacity = '1';
            }, 100);
        });
    </script>
</body>
</html>